(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"/WJA":function(e,t,r){"use strict";r.r(t),r.d(t,"TechnicalAnalysisModule",function(){return mi});var n={};r.r(n),r.d(n,"CandleData",function(){return Ge}),r.d(n,"CandleList",function(){return Ue}),r.d(n,"sma",function(){return Qe}),r.d(n,"SMA",function(){return Ye}),r.d(n,"ema",function(){return tt}),r.d(n,"EMA",function(){return et}),r.d(n,"wma",function(){return nt}),r.d(n,"WMA",function(){return rt}),r.d(n,"wema",function(){return st}),r.d(n,"WEMA",function(){return it}),r.d(n,"macd",function(){return at}),r.d(n,"MACD",function(){return ot}),r.d(n,"rsi",function(){return pt}),r.d(n,"RSI",function(){return dt}),r.d(n,"bollingerbands",function(){return mt}),r.d(n,"BollingerBands",function(){return gt}),r.d(n,"adx",function(){return Ct}),r.d(n,"ADX",function(){return It}),r.d(n,"atr",function(){return Ot}),r.d(n,"ATR",function(){return St}),r.d(n,"truerange",function(){return _t}),r.d(n,"TrueRange",function(){return bt}),r.d(n,"roc",function(){return Pt}),r.d(n,"ROC",function(){return Et}),r.d(n,"kst",function(){return Ft}),r.d(n,"KST",function(){return Mt}),r.d(n,"psar",function(){return Lt}),r.d(n,"PSAR",function(){return At}),r.d(n,"stochastic",function(){return Vt}),r.d(n,"Stochastic",function(){return Tt}),r.d(n,"williamsr",function(){return kt}),r.d(n,"WilliamsR",function(){return Dt}),r.d(n,"adl",function(){return qt}),r.d(n,"ADL",function(){return zt}),r.d(n,"obv",function(){return Rt}),r.d(n,"OBV",function(){return Bt}),r.d(n,"trix",function(){return jt}),r.d(n,"TRIX",function(){return Ht}),r.d(n,"forceindex",function(){return Gt}),r.d(n,"ForceIndex",function(){return Nt}),r.d(n,"cci",function(){return Xt}),r.d(n,"CCI",function(){return Ut}),r.d(n,"awesomeoscillator",function(){return Kt}),r.d(n,"AwesomeOscillator",function(){return Wt}),r.d(n,"vwap",function(){return Jt}),r.d(n,"VWAP",function(){return $t}),r.d(n,"volumeprofile",function(){return Yt}),r.d(n,"VolumeProfile",function(){return Zt}),r.d(n,"mfi",function(){return tr}),r.d(n,"MFI",function(){return er}),r.d(n,"stochasticrsi",function(){return nr}),r.d(n,"StochasticRSI",function(){return rr}),r.d(n,"averagegain",function(){return lt}),r.d(n,"AverageGain",function(){return ut}),r.d(n,"averageloss",function(){return ht}),r.d(n,"AverageLoss",function(){return ct}),r.d(n,"sd",function(){return ft}),r.d(n,"SD",function(){return vt}),r.d(n,"highest",function(){return sr}),r.d(n,"Highest",function(){return ir}),r.d(n,"lowest",function(){return ar}),r.d(n,"Lowest",function(){return or}),r.d(n,"sum",function(){return lr}),r.d(n,"Sum",function(){return ur}),r.d(n,"FixedSizeLinkedList",function(){return Ne}),r.d(n,"renko",function(){return hr}),r.d(n,"HeikinAshi",function(){return dr}),r.d(n,"heikinashi",function(){return pr}),r.d(n,"bullish",function(){return Zr}),r.d(n,"bearish",function(){return Sn}),r.d(n,"abandonedbaby",function(){return En}),r.d(n,"doji",function(){return Cr}),r.d(n,"bearishengulfingpattern",function(){return Qr}),r.d(n,"bullishengulfingpattern",function(){return wr}),r.d(n,"darkcloudcover",function(){return Mn}),r.d(n,"downsidetasukigap",function(){return Pr}),r.d(n,"dragonflydoji",function(){return An}),r.d(n,"gravestonedoji",function(){return Tn}),r.d(n,"bullishharami",function(){return xr}),r.d(n,"bearishharami",function(){return tn}),r.d(n,"bullishharamicross",function(){return _r}),r.d(n,"bearishharamicross",function(){return nn}),r.d(n,"eveningdojistar",function(){return on}),r.d(n,"eveningstar",function(){return un}),r.d(n,"morningdojistar",function(){return Or}),r.d(n,"morningstar",function(){return gr}),r.d(n,"bullishmarubozu",function(){return Fr}),r.d(n,"bearishmarubozu",function(){return cn}),r.d(n,"piercingline",function(){return Lr}),r.d(n,"bullishspinningtop",function(){return Dn}),r.d(n,"bearishspinningtop",function(){return zn}),r.d(n,"threeblackcrows",function(){return dn}),r.d(n,"threewhitesoldiers",function(){return Vr}),r.d(n,"bullishhammerstick",function(){return kr}),r.d(n,"bearishhammerstick",function(){return Rr}),r.d(n,"bullishinvertedhammerstick",function(){return qr}),r.d(n,"bearishinvertedhammerstick",function(){return jr}),r.d(n,"hammerpattern",function(){return Gr}),r.d(n,"hammerpatternunconfirmed",function(){return Xr}),r.d(n,"hangingman",function(){return vn}),r.d(n,"hangingmanunconfirmed",function(){return gn}),r.d(n,"shootingstar",function(){return wn}),r.d(n,"shootingstarunconfirmed",function(){return xn}),r.d(n,"tweezertop",function(){return _n}),r.d(n,"tweezerbottom",function(){return Kr}),r.d(n,"fibonacciretracement",function(){return qn}),r.d(n,"ichimokucloud",function(){return Rn}),r.d(n,"IchimokuCloud",function(){return Bn}),r.d(n,"keltnerchannels",function(){return Gn}),r.d(n,"KeltnerChannels",function(){return Nn}),r.d(n,"KeltnerChannelsInput",function(){return Hn}),r.d(n,"KeltnerChannelsOutput",function(){return jn}),r.d(n,"chandelierexit",function(){return Kn}),r.d(n,"ChandelierExit",function(){return Wn}),r.d(n,"ChandelierExitInput",function(){return Un}),r.d(n,"ChandelierExitOutput",function(){return Xn}),r.d(n,"crossUp",function(){return Jn}),r.d(n,"CrossUp",function(){return $n}),r.d(n,"crossDown",function(){return Yn}),r.d(n,"CrossDown",function(){return Zn}),r.d(n,"setConfig",function(){return We}),r.d(n,"getConfig",function(){return Ke});var i=r("ofXK");function s(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{u(n.next(e))}catch(t){s(t)}}function a(e){try{u(n.throw(e))}catch(t){s(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}u((n=n.apply(e,t||[])).next())})}var o=r("fXoL"),a=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var r=-1;return e.some(function(e,n){return e[0]===t&&(r=n,!0)}),r}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var r=e(this.__entries__,t),n=this.__entries__[r];return n&&n[1]},t.prototype.set=function(t,r){var n=e(this.__entries__,t);~n?this.__entries__[n][1]=r:this.__entries__.push([t,r])},t.prototype.delete=function(t){var r=this.__entries__,n=e(r,t);~n&&r.splice(n,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var r=0,n=this.__entries__;r<n.length;r++){var i=n[r];e.call(t,i[1],i[0])}},t}()}(),u="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,l="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),c="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(l):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)},h=["top","right","bottom","left","width","height","size","weight"],d="undefined"!=typeof MutationObserver,p=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var r=!1,n=!1,i=0;function s(){r&&(r=!1,e()),n&&a()}function o(){c(s)}function a(){var e=Date.now();if(r){if(e-i<2)return;n=!0}else r=!0,n=!1,setTimeout(o,20);i=e}return a}(this.refresh.bind(this))}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,r=t.indexOf(e);~r&&t.splice(r,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return e.forEach(function(e){return e.broadcastActive()}),e.length>0},e.prototype.connect_=function(){u&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),d?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){u&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,r=void 0===t?"":t;h.some(function(e){return!!~r.indexOf(e)})&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),v=function(e,t){for(var r=0,n=Object.keys(t);r<n.length;r++){var i=n[r];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},f=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||l},g=x(0,0,0,0);function m(e){return parseFloat(e)||0}function w(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.reduce(function(t,r){return t+m(e["border-"+r+"-width"])},0)}var y="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof f(e).SVGGraphicsElement}:function(e){return e instanceof f(e).SVGElement&&"function"==typeof e.getBBox};function x(e,t,r,n){return{x:e,y:t,width:r,height:n}}var b=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=x(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e,t=(e=this.target,u?y(e)?function(e){var t=e.getBBox();return x(0,0,t.width,t.height)}(e):function(e){var t=e.clientWidth,r=e.clientHeight;if(!t&&!r)return g;var n=f(e).getComputedStyle(e),i=function(e){for(var t={},r=0,n=["top","right","bottom","left"];r<n.length;r++){var i=n[r];t[i]=m(e["padding-"+i])}return t}(n),s=i.left+i.right,o=i.top+i.bottom,a=m(n.width),u=m(n.height);if("border-box"===n.boxSizing&&(Math.round(a+s)!==t&&(a-=w(n,"left","right")+s),Math.round(u+o)!==r&&(u-=w(n,"top","bottom")+o)),!function(e){return e===f(e).document.documentElement}(e)){var l=Math.round(a+s)-t,c=Math.round(u+o)-r;1!==Math.abs(l)&&(a-=l),1!==Math.abs(c)&&(u-=c)}return x(i.left,i.top,a,u)}(e):g);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),_=function(e,t){var r,n,i,s,o,a,u,l=(n=(r=t).x,i=r.y,s=r.width,o=r.height,a="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,u=Object.create(a.prototype),v(u,{x:n,y:i,width:s,height:o,top:i,right:n+s,bottom:o+i,left:n}),u);v(this,{target:e,contentRect:l})},I=function(){function e(e,t,r){if(this.activeObservations_=[],this.observations_=new a,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=r}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof f(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new b(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof f(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(e){return new _(e.target,e.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),C="undefined"!=typeof WeakMap?new WeakMap:new a,S=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=p.getInstance(),n=new I(t,r,this);C.set(this,n)};["observe","unobserve","disconnect"].forEach(function(e){S.prototype[e]=function(){var t;return(t=C.get(this))[e].apply(t,arguments)}});var O=void 0!==l.ResizeObserver?l.ResizeObserver:S,E=r("LRne"),P=r("EY2u"),M=r("HDdC"),F=r("eIep");class A{constructor(e){this.changes=e}static of(e){return new A(e)}notEmpty(e){if(this.changes[e]){const t=this.changes[e].currentValue;if(null!=t)return Object(E.a)(t)}return P.a}has(e){if(this.changes[e]){const t=this.changes[e].currentValue;return Object(E.a)(t)}return P.a}notFirst(e){if(this.changes[e]&&!this.changes[e].isFirstChange()){const t=this.changes[e].currentValue;return Object(E.a)(t)}return P.a}notFirstAndEmpty(e){if(this.changes[e]&&!this.changes[e].isFirstChange()){const t=this.changes[e].currentValue;if(null!=t)return Object(E.a)(t)}return P.a}}const L=new o.s("NGX_ECHARTS_CONFIG");let T=(()=>{let e=class{constructor(e,t,r){this.el=t,this.ngZone=r,this.autoResize=!0,this.loadingType="default",this.chartInit=new o.o,this.optionsError=new o.o,this.chartClick=this.createLazyEvent("click"),this.chartDblClick=this.createLazyEvent("dblclick"),this.chartMouseDown=this.createLazyEvent("mousedown"),this.chartMouseMove=this.createLazyEvent("mousemove"),this.chartMouseUp=this.createLazyEvent("mouseup"),this.chartMouseOver=this.createLazyEvent("mouseover"),this.chartMouseOut=this.createLazyEvent("mouseout"),this.chartGlobalOut=this.createLazyEvent("globalout"),this.chartContextMenu=this.createLazyEvent("contextmenu"),this.chartLegendSelectChanged=this.createLazyEvent("legendselectchanged"),this.chartLegendSelected=this.createLazyEvent("legendselected"),this.chartLegendUnselected=this.createLazyEvent("legendunselected"),this.chartLegendScroll=this.createLazyEvent("legendscroll"),this.chartDataZoom=this.createLazyEvent("datazoom"),this.chartDataRangeSelected=this.createLazyEvent("datarangeselected"),this.chartTimelineChanged=this.createLazyEvent("timelinechanged"),this.chartTimelinePlayChanged=this.createLazyEvent("timelineplaychanged"),this.chartRestore=this.createLazyEvent("restore"),this.chartDataViewChanged=this.createLazyEvent("dataviewchanged"),this.chartMagicTypeChanged=this.createLazyEvent("magictypechanged"),this.chartPieSelectChanged=this.createLazyEvent("pieselectchanged"),this.chartPieSelected=this.createLazyEvent("pieselected"),this.chartPieUnselected=this.createLazyEvent("pieunselected"),this.chartMapSelectChanged=this.createLazyEvent("mapselectchanged"),this.chartMapSelected=this.createLazyEvent("mapselected"),this.chartMapUnselected=this.createLazyEvent("mapunselected"),this.chartAxisAreaSelected=this.createLazyEvent("axisareaselected"),this.chartFocusNodeAdjacency=this.createLazyEvent("focusnodeadjacency"),this.chartUnfocusNodeAdjacency=this.createLazyEvent("unfocusnodeadjacency"),this.chartBrush=this.createLazyEvent("brush"),this.chartBrushEnd=this.createLazyEvent("brushend"),this.chartBrushSelected=this.createLazyEvent("brushselected"),this.chartRendered=this.createLazyEvent("rendered"),this.chartFinished=this.createLazyEvent("finished"),this.echarts=e.echarts}ngOnChanges(e){const t=A.of(e);t.notFirstAndEmpty("options").subscribe(e=>this.onOptionsChange(e)),t.notFirstAndEmpty("merge").subscribe(e=>this.setOption(e)),t.has("loading").subscribe(e=>this.toggleLoading(!!e)),t.notFirst("theme").subscribe(()=>this.refreshChart())}ngOnInit(){this.autoResize&&(this.resizeSub=new O(()=>this.resize()),this.resizeSub.observe(this.el.nativeElement))}ngOnDestroy(){this.resizeSub&&this.resizeSub.unobserve(this.el.nativeElement),this.dispose()}ngAfterViewInit(){setTimeout(()=>this.initChart())}dispose(){this.chart&&(this.chart.dispose(),this.chart=null)}resize(){this.chart&&this.chart.resize()}toggleLoading(e){this.chart&&(e?this.chart.showLoading(this.loadingType,this.loadingOpts):this.chart.hideLoading())}setOption(e,t){if(this.chart)try{this.chart.setOption(e,t)}catch(r){console.error(r),this.optionsError.emit(r)}}refreshChart(){return s(this,void 0,void 0,function*(){this.dispose(),yield this.initChart()})}createChart(){const e=this.el.nativeElement;if(window&&window.getComputedStyle){const t=window.getComputedStyle(e,null).getPropertyValue("height");t&&"0px"!==t||e.style.height&&"0px"!==e.style.height||(e.style.height="400px")}return this.ngZone.runOutsideAngular(()=>("function"==typeof this.echarts?this.echarts:()=>Promise.resolve(this.echarts))().then(({init:t})=>t(e,this.theme,this.initOpts)))}initChart(){return s(this,void 0,void 0,function*(){yield this.onOptionsChange(this.options),this.merge&&this.chart&&this.setOption(this.merge)})}onOptionsChange(e){return s(this,void 0,void 0,function*(){e&&(this.chart||(this.chart=yield this.createChart(),this.chartInit.emit(this.chart)),this.setOption(this.options,!0))})}createLazyEvent(e){return this.chartInit.pipe(Object(F.a)(t=>new M.a(r=>(t.on(e,e=>this.ngZone.run(()=>r.next(e))),()=>t.off(e)))))}};var t;return e.\u0275fac=function(t){return new(t||e)(o.Nb(L),o.Nb(o.l),o.Nb(o.B))},e.\u0275dir=o.Ib({type:e,selectors:[["echarts"],["","echarts",""]],inputs:{autoResize:"autoResize",loadingType:"loadingType",options:"options",theme:"theme",loading:"loading",initOpts:"initOpts",merge:"merge",loadingOpts:"loadingOpts"},outputs:{chartInit:"chartInit",optionsError:"optionsError",chartClick:"chartClick",chartDblClick:"chartDblClick",chartMouseDown:"chartMouseDown",chartMouseMove:"chartMouseMove",chartMouseUp:"chartMouseUp",chartMouseOver:"chartMouseOver",chartMouseOut:"chartMouseOut",chartGlobalOut:"chartGlobalOut",chartContextMenu:"chartContextMenu",chartLegendSelectChanged:"chartLegendSelectChanged",chartLegendSelected:"chartLegendSelected",chartLegendUnselected:"chartLegendUnselected",chartLegendScroll:"chartLegendScroll",chartDataZoom:"chartDataZoom",chartDataRangeSelected:"chartDataRangeSelected",chartTimelineChanged:"chartTimelineChanged",chartTimelinePlayChanged:"chartTimelinePlayChanged",chartRestore:"chartRestore",chartDataViewChanged:"chartDataViewChanged",chartMagicTypeChanged:"chartMagicTypeChanged",chartPieSelectChanged:"chartPieSelectChanged",chartPieSelected:"chartPieSelected",chartPieUnselected:"chartPieUnselected",chartMapSelectChanged:"chartMapSelectChanged",chartMapSelected:"chartMapSelected",chartMapUnselected:"chartMapUnselected",chartAxisAreaSelected:"chartAxisAreaSelected",chartFocusNodeAdjacency:"chartFocusNodeAdjacency",chartUnfocusNodeAdjacency:"chartUnfocusNodeAdjacency",chartBrush:"chartBrush",chartBrushEnd:"chartBrushEnd",chartBrushSelected:"chartBrushSelected",chartRendered:"chartRendered",chartFinished:"chartFinished"},exportAs:["echarts"],features:[o.zb]}),e=function(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}([(t=Object(o.q)(L),function(e,r){t(e,r,0)})],e),e})();var V;let D=(()=>{let e=V=class{static forRoot(e){return{ngModule:V,providers:[{provide:L,useValue:e}]}}static forChild(){return{ngModule:V}}};return e.\u0275mod=o.Lb({type:e}),e.\u0275inj=o.Kb({factory:function(t){return new(t||e)},imports:[[]]}),e})();var k=r("YUcS"),z=r("3Pt+"),q=r("vvyD"),B=r("tyNb"),R=r("0IaG");let H=(()=>{class e{constructor(){}calculateMA(e,t){const r=[];for(let n=0,i=t.length;n<i;n++){if(n<e){r.push("-");continue}let i=0;for(let r=0;r<e;r++)i+=t[n-r][1];r.push(+(i/e).toFixed(3))}return r}gravity(e,t=1){const r=[],n=this.calculateMA(30,e),i=this.calculateMA(72,e);for(let s=0,o=e.length;s<o;s++)r.push(s<72?"-":((n[s]+i[s])/2*t).toFixed(3));return r}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var j=r("5eHb");const N="#00da3c",G="#ec0000";let U=(()=>{class e{constructor(e,t){this.TIService=e,this.toastr=t,this.categoryData=[],this.oclhv=[],this.volumes=[],this.outputs=[],this.updateExchangeAndSymbol("huobipro").then(),this.symbol="BTC/USDT",this.timeframe="1d"}onSelectionChange(e){return s(this,void 0,void 0,function*(){console.log(e),yield this.updateExchangeAndSymbol(e.value)})}updateExchangeAndSymbol(e,t){return s(this,void 0,void 0,function*(){this.exchange=e,this.exchangeInstance=new ccxt[e],this.symbol=t})}fetchOHLCV(){return s(this,void 0,void 0,function*(){let e;try{e=yield this.exchangeInstance.fetchOHLCV(this.symbol,this.timeframe,0,2e3)}catch(t){this.toastr.error(t)}this.categoryData=[],this.oclhv=[],this.volumes=[];for(const[r,n]of e.entries())this.categoryData.push(new Date(n.splice(0,1)[0]).toDateString()),this.oclhv.push([n[0],n[3],n[2],n[1],n[4]]),this.volumes.push([r,n[4],n[0]>n[3]?1:-1]);return{categoryData:this.categoryData,oclhv:this.oclhv,volumes:this.volumes}})}getChartOption(e,t,r,n={kline:{markPointData:[]}}){return{backgroundColor:"#21202D",animation:!1,legend:{bottom:10,left:"center",data:["K-Line","Gravity","MA10","MA20","MA30"]},axisPointer:{link:[{xAxisIndex:"all"}],label:{backgroundColor:"#777"}},brush:{xAxisIndex:"all",brushLink:"all",outOfBrush:{colorAlpha:.1}},grid:[{left:"2%",right:"2%",height:"71.5%"},{left:"2%",right:"2%",top:"63%",height:"15%"}],visualMap:[{show:!1,seriesIndex:1,dimension:2,pieces:[{value:1,color:G},{value:-1,color:N}]}],xAxis:[{type:"category",data:e,scale:!0,boundaryGap:!0,axisLine:{onZero:!1,lineStyle:{color:"#8392A5"}},splitLine:{show:!1},splitNumber:20,min:"dataMin",max:"dataMax",axisPointer:{z:100}},{type:"category",gridIndex:1,data:e,scale:!0,boundaryGap:!0,axisLine:{onZero:!1,lineStyle:{color:"#8392A5"}},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1},splitNumber:20,min:"dataMin",max:"dataMax"}],yAxis:[{axisLine:{lineStyle:{color:"#8392A5"}},scale:!0,splitLine:{show:!1}},{scale:!0,gridIndex:1,splitNumber:2,axisLabel:{show:!1},axisLine:{show:!1,lineStyle:{color:"#8392A5"}},axisTick:{show:!1},splitLine:{show:!1}}],dataZoom:[{type:"inside",xAxisIndex:[0,1],start:80,end:100},{show:!0,xAxisIndex:[0,1],type:"slider",top:"85%",start:80,end:100}],series:[{name:"K-Line",type:"candlestick",data:t,itemStyle:{color:N,color0:G,borderColor:null,borderColor0:null},markPoint:{data:n.kline.markPointData}},{name:"Volume",type:"bar",xAxisIndex:1,yAxisIndex:1,data:r},{name:"Gravity",type:"line",data:this.TIService.gravity(t),lineStyle:{color:"yellow",opacity:1,width:.5},showSymbol:!1},{name:"Gravity-10%",type:"line",data:this.TIService.gravity(t,1.1),lineStyle:{color:"#dddddd",opacity:.8,width:.5},showSymbol:!1},{name:"Gravity+10%",type:"line",data:this.TIService.gravity(t,.9),lineStyle:{color:"#dddddd",opacity:.8,width:.5},showSymbol:!1},{name:"Gravity-20%",type:"line",data:this.TIService.gravity(t,1.2),lineStyle:{color:"#bbbbbb",opacity:.5,width:.5},showSymbol:!1},{name:"Gravity+20%",type:"line",data:this.TIService.gravity(t,.8),lineStyle:{color:"#bbbbbb",opacity:.5,width:.5},showSymbol:!1},{name:"Gravity-30%",type:"line",data:this.TIService.gravity(t,1.3),lineStyle:{color:"#aaa",opacity:.5,width:.3},showSymbol:!1},{name:"Gravity+30%",type:"line",data:this.TIService.gravity(t,.7),lineStyle:{color:"#aaa",opacity:.5,width:.3},showSymbol:!1}]}}}return e.\u0275fac=function(t){return new(t||e)(o.Xb(H),o.Xb(j.b))},e.\u0275prov=o.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var X=r("JX91"),W=r("lJxs");function K(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(e){return t.apply(this,arguments)};case 2:return function(e,r){return t.apply(this,arguments)};case 3:return function(e,r,n){return t.apply(this,arguments)};case 4:return function(e,r,n,i){return t.apply(this,arguments)};case 5:return function(e,r,n,i,s){return t.apply(this,arguments)};case 6:return function(e,r,n,i,s,o){return t.apply(this,arguments)};case 7:return function(e,r,n,i,s,o,a){return t.apply(this,arguments)};case 8:return function(e,r,n,i,s,o,a,u){return t.apply(this,arguments)};case 9:return function(e,r,n,i,s,o,a,u,l){return t.apply(this,arguments)};case 10:return function(e,r,n,i,s,o,a,u,l,c){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function $(e,t){return function(){return t.call(this,e.apply(this,arguments))}}function J(e){return null!=e&&"object"==typeof e&&!0===e["@@functional/placeholder"]}function Z(e){return function t(r){return 0===arguments.length||J(r)?t:e.apply(this,arguments)}}function Y(e){return function t(r,n){switch(arguments.length){case 0:return t;case 1:return J(r)?t:Z(function(t){return e(r,t)});default:return J(r)&&J(n)?t:J(r)?Z(function(t){return e(t,n)}):J(n)?Z(function(t){return e(r,t)}):e(r,n)}}}function Q(e){return function t(r,n,i){switch(arguments.length){case 0:return t;case 1:return J(r)?t:Y(function(t,n){return e(r,t,n)});case 2:return J(r)&&J(n)?t:J(r)?Y(function(t,r){return e(t,n,r)}):J(n)?Y(function(t,n){return e(r,t,n)}):Z(function(t){return e(r,n,t)});default:return J(r)&&J(n)&&J(i)?t:J(r)&&J(n)?Y(function(t,r){return e(t,r,i)}):J(r)&&J(i)?Y(function(t,r){return e(t,n,r)}):J(n)&&J(i)?Y(function(t,n){return e(r,t,n)}):J(r)?Z(function(t){return e(t,n,i)}):J(n)?Z(function(t){return e(r,t,i)}):J(i)?Z(function(t){return e(r,n,t)}):e(r,n,i)}}}var ee=Array.isArray||function(e){return null!=e&&e.length>=0&&"[object Array]"===Object.prototype.toString.call(e)};function te(e){return"[object String]"===Object.prototype.toString.call(e)}var re=Z(function(e){return!!ee(e)||!!e&&"object"==typeof e&&!te(e)&&(1===e.nodeType?!!e.length:0===e.length||e.length>0&&e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1))}),ne=function(){function e(e){this.f=e}return e.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},e.prototype["@@transducer/result"]=function(e){return e},e.prototype["@@transducer/step"]=function(e,t){return this.f(e,t)},e}(),ie=Y(function(e,t){return K(e.length,function(){return e.apply(t,arguments)})});function se(e,t,r){for(var n=r.next();!n.done;){if((t=e["@@transducer/step"](t,n.value))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}n=r.next()}return e["@@transducer/result"](t)}function oe(e,t,r,n){return e["@@transducer/result"](r[n](ie(e["@@transducer/step"],e),t))}var ae="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function ue(e,t,r){if("function"==typeof e&&(e=function(e){return new ne(e)}(e)),re(r))return function(e,t,r){for(var n=0,i=r.length;n<i;){if((t=e["@@transducer/step"](t,r[n]))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}n+=1}return e["@@transducer/result"](t)}(e,t,r);if("function"==typeof r["fantasy-land/reduce"])return oe(e,t,r,"fantasy-land/reduce");if(null!=r[ae])return se(e,t,r[ae]());if("function"==typeof r.next)return se(e,t,r);if("function"==typeof r.reduce)return oe(e,t,r,"reduce");throw new TypeError("reduce: list must be array or iterable")}var le=Q(ue);function ce(e,t){return function(){var r=arguments.length;if(0===r)return t();var n=arguments[r-1];return ee(n)||"function"!=typeof n[e]?t.apply(this,arguments):n[e].apply(n,Array.prototype.slice.call(arguments,0,r-1))}}var he=Z(ce("tail",Q(ce("slice",function(e,t,r){return Array.prototype.slice.call(r,e,t)}))(1,1/0)));function de(){if(0===arguments.length)throw new Error("pipe requires at least one argument");return K(arguments[0].length,le($,arguments[0],he(arguments)))}var pe=Z(function(e){return te(e)?e.split("").reverse().join(""):Array.prototype.slice.call(e,0).reverse()});function ve(e,t){return Object.prototype.hasOwnProperty.call(t,e)}var fe=Object.prototype.toString,ge=function(){return"[object Arguments]"===fe.call(arguments)?function(e){return"[object Arguments]"===fe.call(e)}:function(e){return ve("callee",e)}}(),me=!{toString:null}.propertyIsEnumerable("toString"),we=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],ye=function(){return arguments.propertyIsEnumerable("length")}(),xe=function(e,t){for(var r=0;r<e.length;){if(e[r]===t)return!0;r+=1}return!1},be=Z("function"!=typeof Object.keys||ye?function(e){if(Object(e)!==e)return[];var t,r,n=[],i=ye&&ge(e);for(t in e)!ve(t,e)||i&&"length"===t||(n[n.length]=t);if(me)for(r=we.length-1;r>=0;)ve(t=we[r],e)&&!xe(n,t)&&(n[n.length]=t),r-=1;return n}:function(e){return Object(e)!==e?[]:Object.keys(e)}),_e=Z(function(e){for(var t=be(e),r=t.length,n=[],i=0;i<r;)n[i]=e[t[i]],i+=1;return n});function Ie(e){return null!=e&&"function"==typeof e["@@transducer/step"]}function Ce(e,t,r){return function(){if(0===arguments.length)return r();var n=Array.prototype.slice.call(arguments,0),i=n.pop();if(!ee(i)){for(var s=0;s<e.length;){if("function"==typeof i[e[s]])return i[e[s]].apply(i,n);s+=1}if(Ie(i)){var o=t.apply(null,n);return o(i)}}return r.apply(this,arguments)}}var Se=function(){return this.xf["@@transducer/init"]()},Oe=function(e){return this.xf["@@transducer/result"](e)},Ee=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=Se,e.prototype["@@transducer/result"]=Oe,e.prototype["@@transducer/step"]=function(e,t){return this.xf["@@transducer/step"](e,this.f(t))},e}(),Pe=Y(function(e,t){return new Ee(e,t)});function Me(e,t,r){return function(){for(var n=[],i=0,s=e,o=0;o<t.length||i<arguments.length;){var a;o<t.length&&(!J(t[o])||i>=arguments.length)?a=t[o]:(a=arguments[i],i+=1),n[o]=a,J(a)||(s-=1),o+=1}return s<=0?r.apply(this,n):K(s,Me(e,n,r))}}var Fe=Y(function(e,t){return 1===e?Z(t):K(e,Me(e,[],t))}),Ae=Y(Ce(["fantasy-land/map","map"],Pe,function(e,t){switch(Object.prototype.toString.call(t)){case"[object Function]":return Fe(t.length,function(){return e.call(this,t.apply(this,arguments))});case"[object Object]":return ue(function(r,n){return r[n]=e(t[n]),r},{},be(t));default:return function(e,t){for(var r=0,n=t.length,i=Array(n);r<n;)i[r]=e(t[r]),r+=1;return i}(e,t)}})),Le=r("kmnG"),Te=r("d3UM"),Ve=r("qFsG"),De=r("/1cH"),ke=r("bTqV"),ze=r("FKr1");function qe(e,t){if(1&e&&(o.Tb(0,"mat-option",11),o.Fc(1),o.gc(2,"uppercase"),o.Sb()),2&e){const e=t.$implicit;o.lc("value",e),o.Bb(1),o.Hc("\n        ",o.hc(2,2,e),"\n      ")}}function Be(e,t){if(1&e&&(o.Tb(0,"mat-option",11),o.Fc(1),o.Sb()),2&e){const e=t.$implicit;o.lc("value",e.symbol),o.Bb(1),o.Hc("\n        ",e.symbol,"\n      ")}}let Re=(()=>{class e{constructor(e,t,r){this.dialogRef=e,this.data=t,this.cs=r,this.exchangeList=ccxt.exchanges,this.exchangeFormControl=new z.e("huobipro"),this.symbolFormControl=new z.e("BTC/USDT"),this.exchangeFormControl.setValue(r.exchange),this.symbolFormControl.setValue(r.symbol)}ngOnInit(){return s(this,void 0,void 0,function*(){const e=yield this.cs.exchangeInstance.loadMarkets();this.symbolList=function(){if(0===arguments.length)throw new Error("compose requires at least one argument");return de.apply(this,pe(arguments))}(_e,Ae(e=>e))(e),this.symbolFilteredOptions=this.symbolFormControl.valueChanges.pipe(Object(X.a)(""),Object(W.a)(e=>(console.log(e),this._filter(e))))})}save(){return s(this,void 0,void 0,function*(){yield this.cs.updateExchangeAndSymbol(this.exchangeFormControl.value,this.symbolFormControl.value),this.dialogRef.close(!0)})}_filter(e){console.log(e);const t=e.toLowerCase();return this.symbolList.filter(e=>0===e.symbol.toLowerCase().indexOf(t))}}return e.\u0275fac=function(t){return new(t||e)(o.Nb(R.g),o.Nb(R.a),o.Nb(U))},e.\u0275cmp=o.Hb({type:e,selectors:[["app-select-symbol-dialog"]],decls:38,vars:7,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"formControl","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"example-full-width"],["type","text","placeholder","\u4ea4\u6613\u5bf9","matInput","",3,"formControl","matAutocomplete"],["autoActiveFirstOption",""],["auto","matAutocomplete"],["mat-dialog-actions",""],["mat-button","","mat-dialog-close",""],["mat-button","",3,"click"],[3,"value"]],template:function(e,t){if(1&e&&(o.Tb(0,"h2",0),o.Fc(1,"\u9009\u62e9\u4ea4\u6613\u5bf9"),o.Sb(),o.Fc(2,"\n\n"),o.Tb(3,"div",1),o.Fc(4,"\n  "),o.Tb(5,"mat-form-field"),o.Fc(6,"\n    "),o.Tb(7,"mat-label"),o.Fc(8,"\u4ea4\u6613\u6240"),o.Sb(),o.Fc(9,"\n    "),o.Tb(10,"mat-select",2),o.bc("selectionChange",function(e){return t.cs.onSelectionChange(e)}),o.Fc(11,"\n      "),o.Dc(12,qe,3,4,"mat-option",3),o.Fc(13,"\n    "),o.Sb(),o.Fc(14,"\n  "),o.Sb(),o.Fc(15,"\n  "),o.Tb(16,"mat-form-field",4),o.Fc(17,"\n    "),o.Ob(18,"input",5),o.Fc(19,"\n    "),o.Tb(20,"mat-autocomplete",6,7),o.Fc(22,"\n      "),o.Dc(23,Be,2,2,"mat-option",3),o.gc(24,"async"),o.Fc(25,"\n    "),o.Sb(),o.Fc(26,"\n  "),o.Sb(),o.Fc(27,"\n"),o.Sb(),o.Fc(28,"\n\n"),o.Tb(29,"div",8),o.Fc(30,"\n  "),o.Tb(31,"button",9),o.Fc(32,"Close"),o.Sb(),o.Fc(33,"\n  "),o.Tb(34,"button",10),o.bc("click",function(){return t.save()}),o.Fc(35,"Save"),o.Sb(),o.Fc(36,"\n"),o.Sb(),o.Fc(37,"\n")),2&e){const e=o.sc(21);o.Bb(10),o.lc("formControl",t.exchangeFormControl),o.Bb(2),o.lc("ngForOf",t.exchangeList),o.Bb(6),o.lc("formControl",t.symbolFormControl)("matAutocomplete",e),o.Bb(5),o.lc("ngForOf",o.hc(24,5,t.symbolFilteredOptions))}},directives:[R.h,R.e,Le.c,Le.f,Te.a,z.m,z.f,i.l,Ve.b,z.c,De.c,De.a,R.c,ke.a,R.d,ze.m],pipes:[i.b,i.v],styles:[""]}),e})();class He{constructor(e,t,r){this.next=r,r&&(r.prev=this),this.prev=t,t&&(t.next=this),this.data=e}}class je{constructor(){this._length=0}get head(){return this._head&&this._head.data}get tail(){return this._tail&&this._tail.data}get current(){return this._current&&this._current.data}get length(){return this._length}push(e){this._tail=new He(e,this._tail),0===this._length&&(this._head=this._tail,this._current=this._head,this._next=this._head),this._length++}pop(){var e=this._tail;if(0!==this._length)return this._length--,0===this._length?(this._head=this._tail=this._current=this._next=void 0,e.data):(this._tail=e.prev,this._tail.next=void 0,this._current===e&&(this._current=this._tail,this._next=void 0),e.data)}shift(){var e=this._head;if(0!==this._length)return this._length--,0===this._length?(this._head=this._tail=this._current=this._next=void 0,e.data):(this._head=this._head.next,this._current===e&&(this._current=this._head,this._next=this._current.next),e.data)}unshift(e){this._head=new He(e,void 0,this._head),0===this._length&&(this._tail=this._head,this._next=this._head),this._length++}unshiftCurrent(){var e=this._current;return e===this._head||this._length<2?e&&e.data:(e===this._tail?(this._tail=e.prev,this._tail.next=void 0,this._current=this._tail):(e.next.prev=e.prev,e.prev.next=e.next,this._current=e.prev),this._next=this._current.next,e.next=this._head,e.prev=void 0,this._head.prev=e,this._head=e,e.data)}removeCurrent(){var e=this._current;if(0!==this._length)return this._length--,0===this._length?(this._head=this._tail=this._current=this._next=void 0,e.data):(e===this._tail?(this._tail=e.prev,this._tail.next=void 0,this._current=this._tail):e===this._head?(this._head=e.next,this._head.prev=void 0,this._current=this._head):(e.next.prev=e.prev,e.prev.next=e.next,this._current=e.prev),this._next=this._current.next,e.data)}resetCursor(){return this._current=this._next=this._head,this}next(){var e=this._next;if(void 0!==e)return this._next=e.next,this._current=e,e.data}}class Ne extends je{constructor(e,t,r,n){if(super(),this.size=e,this.maintainHigh=t,this.maintainLow=r,this.maintainSum=n,this.totalPushed=0,this.periodHigh=0,this.periodLow=1/0,this.periodSum=0,!e||"number"!=typeof e)throw"Size required and should be a number.";this._push=this.push,this.push=function(e){this.add(e),this.totalPushed++}}add(e){this.length===this.size?(this.lastShift=this.shift(),this._push(e),this.maintainHigh&&this.lastShift==this.periodHigh&&this.calculatePeriodHigh(),this.maintainLow&&this.lastShift==this.periodLow&&this.calculatePeriodLow(),this.maintainSum&&(this.periodSum=this.periodSum-this.lastShift)):this._push(e),this.maintainHigh&&this.periodHigh<=e&&(this.periodHigh=e),this.maintainLow&&this.periodLow>=e&&(this.periodLow=e),this.maintainSum&&(this.periodSum=this.periodSum+e)}*iterator(){for(this.resetCursor();this.next();)yield this.current}calculatePeriodHigh(){for(this.resetCursor(),this.next()&&(this.periodHigh=this.current);this.next();)this.periodHigh<=this.current&&(this.periodHigh=this.current)}calculatePeriodLow(){for(this.resetCursor(),this.next()&&(this.periodLow=this.current);this.next();)this.periodLow>=this.current&&(this.periodLow=this.current)}}class Ge{}class Ue{constructor(){this.open=[],this.high=[],this.low=[],this.close=[],this.volume=[],this.timestamp=[]}}let Xe={};function We(e,t){Xe[e]=t}function Ke(e){return Xe[e]}function $e(e){let t=Ke("precision");return t?parseFloat(e.toPrecision(t)):e}class Je{}class Ze{constructor(e){this.format=e.format||$e}static reverseInputs(e){e.reversedInput&&(e.values&&e.values.reverse(),e.open&&e.open.reverse(),e.high&&e.high.reverse(),e.low&&e.low.reverse(),e.close&&e.close.reverse(),e.volume&&e.volume.reverse(),e.timestamp&&e.timestamp.reverse())}getResult(){return this.result}}class Ye extends Ze{constructor(e){super(e),this.period=e.period,this.price=e.values,this.generator=function*(e){var t,r=new je,n=0,i=1,s=yield;for(r.push(0);;)i<e?(i++,r.push(s),n+=s):(t=(n=n-r.shift()+s)/e,r.push(s)),s=yield t}(this.period),this.generator.next(),this.result=[],this.price.forEach(e=>{var t=this.generator.next(e);void 0!==t.value&&this.result.push(this.format(t.value))})}nextValue(e){var t=this.generator.next(e).value;if(null!=t)return this.format(t)}}function Qe(e){Ze.reverseInputs(e);var t=new Ye(e).result;return e.reversedInput&&t.reverse(),Ze.reverseInputs(e),t}Ye.calculate=Qe;class et extends Ze{constructor(e){super(e);var t,r=e.period,n=e.values,i=2/(r+1);this.result=[],t=new Ye({period:r,values:[]}),this.generator=function*(){for(var e,r=yield;;)void 0!==e&&void 0!==r?(e=(r-e)*i+e,r=yield e):(r=yield,(e=t.nextValue(r))&&(r=yield e))}(),this.generator.next(),this.generator.next(),n.forEach(e=>{var t=this.generator.next(e);null!=t.value&&this.result.push(this.format(t.value))})}nextValue(e){var t=this.generator.next(e).value;if(null!=t)return this.format(t)}}function tt(e){Ze.reverseInputs(e);var t=new et(e).result;return e.reversedInput&&t.reverse(),Ze.reverseInputs(e),t}et.calculate=tt;class rt extends Ze{constructor(e){super(e);var t=e.period,r=e.values;this.result=[],this.generator=function*(){let e=new je,r=t*(t+1)/2;for(;;)if(e.length<t)e.push(yield);else{e.resetCursor();let i=0;for(let n=1;n<=t;n++)i+=e.next()*n/r;var n=yield i;e.shift(),e.push(n)}}(),this.generator.next(),r.forEach((e,t)=>{var r=this.generator.next(e);null!=r.value&&this.result.push(this.format(r.value))})}nextValue(e){var t=this.generator.next(e).value;if(null!=t)return this.format(t)}}function nt(e){Ze.reverseInputs(e);var t=new rt(e).result;return e.reversedInput&&t.reverse(),Ze.reverseInputs(e),t}rt.calculate=nt;class it extends Ze{constructor(e){super(e);var t,r=e.period,n=e.values,i=1/r;this.result=[],t=new Ye({period:r,values:[]}),this.generator=function*(){for(var e,r=yield;;)void 0!==e&&void 0!==r?(e=(r-e)*i+e,r=yield e):(r=yield,void 0!==(e=t.nextValue(r))&&(r=yield e))}(),this.generator.next(),this.generator.next(),n.forEach(e=>{var t=this.generator.next(e);null!=t.value&&this.result.push(this.format(t.value))})}nextValue(e){var t=this.generator.next(e).value;if(null!=t)return this.format(t)}}function st(e){Ze.reverseInputs(e);var t=new it(e).result;return e.reversedInput&&t.reverse(),Ze.reverseInputs(e),t}it.calculate=st;class ot extends Ze{constructor(e){super(e);var t=e.SimpleMAOscillator?Ye:et,r=e.SimpleMASignal?Ye:et,n=new t({period:e.fastPeriod,values:[],format:e=>e}),i=new t({period:e.slowPeriod,values:[],format:e=>e}),s=new r({period:e.signalPeriod,values:[],format:e=>e}),o=this.format;this.result=[],this.generator=function*(){for(var t,r,a,u,l,c,h=0;;)h<e.slowPeriod?(t=yield,l=n.nextValue(t),c=i.nextValue(t),h++):(l&&c&&(a=s.nextValue(r=l-c)),u=r-a,t=yield{MACD:o(r),signal:a?o(a):void 0,histogram:isNaN(u)?void 0:o(u)},l=n.nextValue(t),c=i.nextValue(t))}(),this.generator.next(),e.values.forEach(e=>{var t=this.generator.next(e);null!=t.value&&this.result.push(t.value)})}nextValue(e){return this.generator.next(e).value}}function at(e){Ze.reverseInputs(e);var t=new ot(e).result;return e.reversedInput&&t.reverse(),Ze.reverseInputs(e),t}ot.calculate=at;class ut extends Ze{constructor(e){super(e);let t=e.values,r=this.format;this.generator=function*(e){var t,n,i=yield,s=1,o=0,a=i;for(i=yield;;)(n=(n=i-a)>0?n:0)>0&&(o+=n),s<e?s++:t=void 0===t?o/e:(t*(e-1)+n)/e,a=i,t=void 0!==t?r(t):void 0,i=yield t}(e.period),this.generator.next(),this.result=[],t.forEach(e=>{var t=this.generator.next(e);void 0!==t.value&&this.result.push(t.value)})}nextValue(e){return this.generator.next(e).value}}function lt(e){Ze.reverseInputs(e);var t=new ut(e).result;return e.reversedInput&&t.reverse(),Ze.reverseInputs(e),t}ut.calculate=lt;class ct extends Ze{constructor(e){super(e);let t=e.values,r=this.format;this.generator=function*(e){var t,n,i=yield,s=1,o=0,a=i;for(i=yield;;)(n=(n=a-i)>0?n:0)>0&&(o+=n),s<e?s++:t=void 0===t?o/e:(t*(e-1)+n)/e,a=i,t=void 0!==t?r(t):void 0,i=yield t}(e.period),this.generator.next(),this.result=[],t.forEach(e=>{var t=this.generator.next(e);void 0!==t.value&&this.result.push(t.value)})}nextValue(e){return this.generator.next(e).value}}function ht(e){Ze.reverseInputs(e);var t=new ct(e).result;return e.reversedInput&&t.reverse(),Ze.reverseInputs(e),t}ct.calculate=ht;class dt extends Ze{constructor(e){super(e);var t=e.period,r=e.values,n=new ut({period:t,values:[]}),i=new ct({period:t,values:[]});this.generator=function*(e){for(var t,r,s,o,a=yield;;)t=n.nextValue(a),r=i.nextValue(a),void 0!==t&&void 0!==r&&(0===r?o=100:0===t?o=0:(s=t/r,s=isNaN(s)?0:s,o=parseFloat((100-100/(1+s)).toFixed(2)))),a=yield o}(),this.generator.next(),this.result=[],r.forEach(e=>{var t=this.generator.next(e);void 0!==t.value&&this.result.push(t.value)})}nextValue(e){return this.generator.next(e).value}}function pt(e){Ze.reverseInputs(e);var t=new dt(e).result;return e.reversedInput&&t.reverse(),Ze.reverseInputs(e),t}dt.calculate=pt;class vt extends Ze{constructor(e){super(e);var t=e.period,r=e.values,n=new Ye({period:t,values:[],format:e=>e});this.result=[],this.generator=function*(){var e,r,i,s=new Ne(t);for(e=yield;;){if(s.push(e),r=n.nextValue(e)){let e=0;for(let t of s.iterator())e+=Math.pow(t-r,2);i=Math.sqrt(e/t)}e=yield i}}(),this.generator.next(),r.forEach(e=>{var t=this.generator.next(e);null!=t.value&&this.result.push(this.format(t.value))})}nextValue(e){var t=this.generator.next(e);if(null!=t.value)return this.format(t.value)}}function ft(e){Ze.reverseInputs(e);var t=new vt(e).result;return e.reversedInput&&t.reverse(),Ze.reverseInputs(e),t}vt.calculate=ft;class gt extends Ze{constructor(e){super(e);var t,r,n=e.period,i=e.values,s=e.stdDev,o=this.format;this.result=[],t=new Ye({period:n,values:[],format:e=>e}),r=new vt({period:n,values:[],format:e=>e}),this.generator=function*(){var e,n,i,a;for(n=yield;;){if(i=t.nextValue(n),a=r.nextValue(n),i){let t=o(i),r=o(i+a*s),u=o(i-a*s);e={middle:t,upper:r,lower:u,pb:o((n-u)/(r-u))}}n=yield e}}(),this.generator.next(),i.forEach(e=>{var t=this.generator.next(e);null!=t.value&&this.result.push(t.value)})}nextValue(e){return this.generator.next(e).value}}function mt(e){Ze.reverseInputs(e);var t=new gt(e).result;return e.reversedInput&&t.reverse(),Ze.reverseInputs(e),t}gt.calculate=mt;class wt extends Ze{constructor(e){super(e),this.period=e.period,this.price=e.values,this.generator=function*(e){new je;for(var t=0,r=1,n=yield,i=0;;)r<e?(r++,t+=n,i=void 0):r==e?(r++,i=t+=n):i=i-i/e+n,n=yield i}(this.period),this.generator.next(),this.result=[],this.price.forEach(e=>{var t=this.generator.next(e);null!=t.value&&this.result.push(this.format(t.value))})}nextValue(e){var t=this.generator.next(e).value;if(null!=t)return this.format(t)}}wt.calculate=function(e){Ze.reverseInputs(e);var t=new wt(e).result;return e.reversedInput&&t.reverse(),Ze.reverseInputs(e),t};class yt extends Ze{constructor(e){super(e);var t=e.low,r=e.high,n=this.format;if(t.length!=r.length)throw"Inputs(low,high) not of equal size";this.result=[],this.generator=function*(){for(var e,t,r=yield;;){if(t){let i=t.low-r.low;e=n(i>r.high-t.high&&i>0?i:0)}t=r,r=yield e}}(),this.generator.next(),t.forEach((e,n)=>{var i=this.generator.next({high:r[n],low:t[n]});void 0!==i.value&&this.result.push(i.value)})}static calculate(e){Ze.reverseInputs(e);var t=new yt(e).result;return e.reversedInput&&t.reverse(),Ze.reverseInputs(e),t}nextValue(e){return this.generator.next(e).value}}class xt extends Ze{constructor(e){super(e);var t=e.low,r=e.high,n=this.format;if(t.length!=r.length)throw"Inputs(low,high) not of equal size";this.result=[],this.generator=function*(){for(var e,t,r=yield;;){if(t){let i=r.high-t.high;e=n(i>t.low-r.low&&i>0?i:0)}t=r,r=yield e}}(),this.generator.next(),t.forEach((e,n)=>{var i=this.generator.next({high:r[n],low:t[n]});void 0!==i.value&&this.result.push(i.value)})}static calculate(e){Ze.reverseInputs(e);var t=new xt(e).result;return e.reversedInput&&t.reverse(),Ze.reverseInputs(e),t}nextValue(e){return this.generator.next(e).value}}class bt extends Ze{constructor(e){super(e);var t=e.low,r=e.high,n=e.close,i=this.format;if(t.length!=r.length)throw"Inputs(low,high) not of equal size";this.result=[],this.generator=function*(){for(var e,t,r=yield;;)void 0===e&&(e=r.close,r=yield t),t=Math.max(r.high-r.low,isNaN(Math.abs(r.high-e))?0:Math.abs(r.high-e),isNaN(Math.abs(r.low-e))?0:Math.abs(r.low-e)),e=r.close,null!=t&&(t=i(t)),r=yield t}(),this.generator.next(),t.forEach((e,i)=>{var s=this.generator.next({high:r[i],low:t[i],close:n[i]});null!=s.value&&this.result.push(s.value)})}nextValue(e){return this.generator.next(e).value}}function _t(e){Ze.reverseInputs(e);var t=new bt(e).result;return e.reversedInput&&t.reverse(),Ze.reverseInputs(e),t}bt.calculate=_t;class It extends Ze{constructor(e){super(e);var t=e.low,r=e.high,n=e.close,i=e.period,s=this.format,o=new xt({high:[],low:[]}),a=new yt({high:[],low:[]}),u=new wt({period:i,values:[],format:e=>e}),l=new wt({period:i,values:[],format:e=>e}),c=new wt({period:i,values:[],format:e=>e}),h=new it({period:i,values:[],format:e=>e}),d=new bt({low:[],high:[],close:[]});if(t.length!==r.length||r.length!==n.length)throw"Inputs(low,high, close) not of equal size";this.result=[],this.generator=function*(){for(var e,t,r,n=yield;;){let i=d.nextValue(n),s=o.nextValue(n),p=a.nextValue(n);if(void 0===i){n=yield;continue}let v=c.nextValue(i),f=u.nextValue(s),g=l.nextValue(p);if(null!=v&&null!=f&&null!=g){e=100*f/v,t=100*g/v;let n=Math.abs(e-t);r=h.nextValue(n/(e+t)*100)}n=yield{adx:r,pdi:e,mdi:t}}}(),this.generator.next(),t.forEach((e,i)=>{var o=this.generator.next({high:r[i],low:t[i],close:n[i]});null!=o.value&&null!=o.value.adx&&this.result.push({adx:s(o.value.adx),pdi:s(o.value.pdi),mdi:s(o.value.mdi)})})}nextValue(e){let t=this.generator.next(e).value;if(null!=t&&null!=t.adx)return{adx:this.format(t.adx),pdi:this.format(t.pdi),mdi:this.format(t.mdi)}}}function Ct(e){Ze.reverseInputs(e);var t=new It(e).result;return e.reversedInput&&t.reverse(),Ze.reverseInputs(e),t}It.calculate=Ct;class St extends Ze{constructor(e){super(e);var t=e.low,r=e.high,n=e.close,i=e.period,s=this.format;if(t.length!==r.length||r.length!==n.length)throw"Inputs(low,high, close) not of equal size";var o=new bt({low:[],high:[],close:[]}),a=new it({period:i,values:[],format:e=>e});this.result=[],this.generator=function*(){for(var e,t,r=yield;;)e=void 0===(t=o.nextValue({low:r.low,high:r.high,close:r.close}))?void 0:a.nextValue(t),r=yield e}(),this.generator.next(),t.forEach((e,i)=>{var o=this.generator.next({high:r[i],low:t[i],close:n[i]});void 0!==o.value&&this.result.push(s(o.value))})}nextValue(e){return this.generator.next(e).value}}function Ot(e){Ze.reverseInputs(e);var t=new St(e).result;return e.reversedInput&&t.reverse(),Ze.reverseInputs(e),t}St.calculate=Ot;class Et extends Ze{constructor(e){super(e);var t=e.period,r=e.values;this.result=[],this.generator=function*(){let e=1;for(var r,n=new Ne(t),i=yield;;)n.push(i),e<t?e++:r=(i-n.lastShift)/n.lastShift*100,i=yield r}(),this.generator.next(),r.forEach(e=>{var t=this.generator.next(e);null==t.value||isNaN(t.value)||this.result.push(this.format(t.value))})}nextValue(e){var t=this.generator.next(e);if(null!=t.value&&!isNaN(t.value))return this.format(t.value)}}function Pt(e){Ze.reverseInputs(e);var t=new Et(e).result;return e.reversedInput&&t.reverse(),Ze.reverseInputs(e),t}Et.calculate=Pt;class Mt extends Ze{constructor(e){super(e);let t=e.values,r=e.ROCPer1,n=e.ROCPer2,i=e.ROCPer3,s=e.ROCPer4,o=e.SMAROCPer1,a=e.SMAROCPer2,u=e.SMAROCPer3,l=e.SMAROCPer4,c=e.signalPeriod,h=new Et({period:r,values:[]}),d=new Et({period:n,values:[]}),p=new Et({period:i,values:[]}),v=new Et({period:s,values:[]}),f=new Ye({period:o,values:[],format:e=>e}),g=new Ye({period:a,values:[],format:e=>e}),m=new Ye({period:u,values:[],format:e=>e}),w=new Ye({period:l,values:[],format:e=>e}),y=new Ye({period:c,values:[],format:e=>e});var x=this.format;this.result=[];let b=Math.max(r+o,n+a,i+u,s+l);this.generator=function*(){let e,t,r,n,i,s,o,a=1,u=yield;for(;;){let l=h.nextValue(u),c=d.nextValue(u),_=p.nextValue(u),I=v.nextValue(u);t=void 0!==l?f.nextValue(l):void 0,r=void 0!==c?g.nextValue(c):void 0,n=void 0!==_?m.nextValue(_):void 0,i=void 0!==I?w.nextValue(I):void 0,a<b?a++:e=1*t+2*r+3*n+4*i,s=void 0!==e?y.nextValue(e):void 0,o=void 0!==e?{kst:x(e),signal:s?x(s):void 0}:void 0,u=yield o}}(),this.generator.next(),t.forEach(e=>{let t=this.generator.next(e);null!=t.value&&this.result.push(t.value)})}nextValue(e){let t=this.generator.next(e);if(null!=t.value)return t.value}}function Ft(e){Ze.reverseInputs(e);var t=new Mt(e).result;return e.reversedInput&&t.reverse(),Ze.reverseInputs(e),t}Mt.calculate=Ft;class At extends Ze{constructor(e){super(e);let t=e.high||[],r=e.low||[];this.result=[],this.generator=function*(e,t){let r,n,i,s,o=!0,a=e,u=yield;for(;;)r?(i+=a*(n-i),o?(i=Math.min(i,s.low,u.low),r.high>n&&(n=r.high,a=Math.min(a+e,t))):(i=Math.max(i,s.high,u.high),r.low<n&&(n=r.low,a=Math.min(a+e,t))),(o&&r.low<i||!o&&r.high>i)&&(a=e,i=n,o=!o,n=o?r.high:r.low)):(i=u.low,n=u.high),s=u,r&&(u=r),r=yield i}(e.step,e.max),this.generator.next(),r.forEach((e,n)=>{var i=this.generator.next({high:t[n],low:r[n]});void 0!==i.value&&this.result.push(i.value)})}nextValue(e){let t=this.generator.next(e);if(void 0!==t.value)return t.value}}function Lt(e){Ze.reverseInputs(e);var t=new At(e).result;return e.reversedInput&&t.reverse(),Ze.reverseInputs(e),t}At.calculate=Lt;class Tt extends Ze{constructor(e){super(e);let t=e.low,r=e.high,n=e.close,i=e.period,s=e.signalPeriod,o=this.format;if(t.length!==r.length||r.length!==n.length)throw"Inputs(low,high, close) not of equal size";this.result=[],this.generator=function*(){let e,t,r=1,n=new Ne(i,!0,!1),a=new Ne(i,!1,!0),u=new Ye({period:s,values:[],format:e=>e});for(var l=yield;;){if(n.push(l.high),a.push(l.low),r<i){r++,l=yield;continue}let s=a.periodLow;e=(l.close-s)/(n.periodHigh-s)*100,e=isNaN(e)?0:e,t=u.nextValue(e),l=yield{k:o(e),d:void 0!==t?o(t):void 0}}}(),this.generator.next(),t.forEach((e,i)=>{var s=this.generator.next({high:r[i],low:t[i],close:n[i]});void 0!==s.value&&this.result.push(s.value)})}nextValue(e){let t=this.generator.next(e);if(void 0!==t.value)return t.value}}function Vt(e){Ze.reverseInputs(e);var t=new Tt(e).result;return e.reversedInput&&t.reverse(),Ze.reverseInputs(e),t}Tt.calculate=Vt;class Dt extends Ze{constructor(e){super(e);let t=e.low,r=e.high,n=e.close,i=e.period,s=this.format;if(t.length!==r.length||r.length!==n.length)throw"Inputs(low,high, close) not of equal size";this.result=[],this.generator=function*(){let e,t,r=1,n=new Ne(i,!0,!1),o=new Ne(i,!1,!0);var a=yield;let u;for(;;)n.push(a.high),o.push(a.low),r<i?(r++,a=yield):(e=o.periodLow,t=n.periodHigh,u=s((t-a.close)/(t-e)*-100),a=yield u)}(),this.generator.next(),t.forEach((e,i)=>{var s=this.generator.next({high:r[i],low:t[i],close:n[i]});void 0!==s.value&&this.result.push(s.value)})}nextValue(e){var t=this.generator.next(e);if(null!=t.value)return this.format(t.value)}}function kt(e){Ze.reverseInputs(e);var t=new Dt(e).result;return e.reversedInput&&t.reverse(),Ze.reverseInputs(e),t}Dt.calculate=kt;class zt extends Ze{constructor(e){super(e);var t=e.high,r=e.low,n=e.close,i=e.volume;if(r.length!==t.length||t.length!==n.length||t.length!==i.length)throw"Inputs(low,high, close, volumes) not of equal size";this.result=[],this.generator=function*(){var e,t=0;for(e=yield;;){let r=(e.close-e.low-(e.high-e.close))/(e.high-e.low);r=isNaN(r)?1:r,t+=r*e.volume,e=yield Math.round(t)}}(),this.generator.next(),t.forEach((e,t)=>{var s=this.generator.next({high:e,low:r[t],close:n[t],volume:i[t]});null!=s.value&&this.result.push(s.value)})}nextValue(e){return this.generator.next(e).value}}function qt(e){Ze.reverseInputs(e);var t=new zt(e).result;return e.reversedInput&&t.reverse(),Ze.reverseInputs(e),t}zt.calculate=qt;class Bt extends Ze{constructor(e){super(e);var t=e.close,r=e.volume;this.result=[],this.generator=function*(){var e,t,r=0;for((e=yield).close&&"number"==typeof e.close&&(t=e.close,e=yield);;)t<e.close?r+=e.volume:e.close<t&&(r-=e.volume),t=e.close,e=yield r}(),this.generator.next(),t.forEach((e,n)=>{let i=this.generator.next({close:t[n],volume:r[n]});null!=i.value&&this.result.push(i.value)})}nextValue(e){return this.generator.next(e).value}}function Rt(e){Ze.reverseInputs(e);var t=new Bt(e).result;return e.reversedInput&&t.reverse(),Ze.reverseInputs(e),t}Bt.calculate=Rt;class Ht extends Ze{constructor(e){super(e);let t=e.values,r=e.period,n=this.format,i=new et({period:r,values:[],format:e=>e}),s=new et({period:r,values:[],format:e=>e}),o=new et({period:r,values:[],format:e=>e}),a=new Et({period:1,values:[],format:e=>e});this.result=[],this.generator=function*(){let e=yield;for(;;){let t=i.nextValue(e),r=t?s.nextValue(t):void 0,u=r?o.nextValue(r):void 0,l=u?a.nextValue(u):void 0;e=yield l?n(l):void 0}}(),this.generator.next(),t.forEach(e=>{let t=this.generator.next(e);void 0!==t.value&&this.result.push(t.value)})}nextValue(e){let t=this.generator.next(e);if(void 0!==t.value)return t.value}}function jt(e){Ze.reverseInputs(e);var t=new Ht(e).result;return e.reversedInput&&t.reverse(),Ze.reverseInputs(e),t}Ht.calculate=jt;class Nt extends Ze{constructor(e){super(e);var t=e.close,r=e.volume;if(r.length!==t.length)throw"Inputs(volume, close) not of equal size";let n=new et({values:[],period:e.period||1});this.result=[],this.generator=function*(){var e=yield,t=yield;let r;for(;;)r=(t.close-e.close)*t.volume,e=t,t=yield n.nextValue(r)}(),this.generator.next(),r.forEach((e,n)=>{var i=this.generator.next({close:t[n],volume:r[n]});null!=i.value&&this.result.push(i.value)})}nextValue(e){let t=this.generator.next(e).value;if(null!=t)return t}}function Gt(e){Ze.reverseInputs(e);var t=new Nt(e).result;return e.reversedInput&&t.reverse(),Ze.reverseInputs(e),t}Nt.calculate=Gt;class Ut extends Ze{constructor(e){super(e);var t=e.low,r=e.high,n=e.close,i=e.period,s=new Ne(i),o=new Ye({period:i,values:[],format:e=>e});if(t.length!==r.length||r.length!==n.length)throw"Inputs(low,high, close) not of equal size";this.result=[],this.generator=function*(){for(var e=yield;;){let t=(e.high+e.low+e.close)/3;s.push(t);let r,n=o.nextValue(t),a=null,u=0;if(null!=n){for(let e of s.iterator())u+=Math.abs(e-n);a=u/i,r=(t-n)/(.015*a)}e=yield r}}(),this.generator.next(),t.forEach((e,i)=>{var s=this.generator.next({high:r[i],low:t[i],close:n[i]});null!=s.value&&this.result.push(s.value)})}nextValue(e){let t=this.generator.next(e).value;if(null!=t)return t}}function Xt(e){Ze.reverseInputs(e);var t=new Ut(e).result;return e.reversedInput&&t.reverse(),Ze.reverseInputs(e),t}Ut.calculate=Xt;class Wt extends Ze{constructor(e){super(e);var t=e.high,r=e.low,n=e.fastPeriod,i=new Ye({values:[],period:e.slowPeriod}),s=new Ye({values:[],period:n});this.result=[],this.generator=function*(){var e,t,r,n,o;for(t=yield;;)n=i.nextValue(r=(t.high+t.low)/2),o=s.nextValue(r),void 0!==n&&void 0!==o&&(e=o-n),t=yield e}(),this.generator.next(),t.forEach((e,t)=>{var n=this.generator.next({high:e,low:r[t]});null!=n.value&&this.result.push(this.format(n.value))})}nextValue(e){var t=this.generator.next(e);if(null!=t.value)return this.format(t.value)}}function Kt(e){Ze.reverseInputs(e);var t=new Wt(e).result;return e.reversedInput&&t.reverse(),Ze.reverseInputs(e),t}Wt.calculate=Kt;class $t extends Ze{constructor(e){super(e);var t=e.low,r=e.high,n=e.close,i=e.volume;if(t.length!==r.length||r.length!==n.length)throw"Inputs(low,high, close) not of equal size";this.result=[],this.generator=function*(){var e=yield;let t=0,r=0;for(;;)t+=e.volume*((e.high+e.low+e.close)/3),r+=e.volume,e=yield t/r}(),this.generator.next(),t.forEach((e,s)=>{var o=this.generator.next({high:r[s],low:t[s],close:n[s],volume:i[s]});null!=o.value&&this.result.push(o.value)})}nextValue(e){let t=this.generator.next(e).value;if(null!=t)return t}}function Jt(e){Ze.reverseInputs(e);var t=new $t(e).result;return e.reversedInput&&t.reverse(),Ze.reverseInputs(e),t}$t.calculate=Jt;class Zt extends Ze{constructor(e){super(e);var t=e.high,r=e.low,n=e.close,i=e.open,s=e.volume,o=e.noOfBars;if(r.length!==t.length||t.length!==n.length||t.length!==s.length)throw"Inputs(low,high, close, volumes) not of equal size";this.result=[];var a,u,l=Math.max(...t,...r,...n,...i),c=Math.min(...t,...r,...n,...i),h=(l-c)/o,d=c;for(let p=0;p<o;p++){let e=d,o=e+h;d=o;let l=0,c=0,p=0;for(let h=0;h<t.length;h++){let d=i[h],v=n[h],f=s[h];((a=e)<=(u=r[h])&&o>=u||u<=a&&t[h]>=a)&&(p+=f,d>v?c+=f:l+=f)}this.result.push({rangeStart:e,rangeEnd:o,bullishVolume:l,bearishVolume:c,totalVolume:p})}}nextValue(e){throw"Next value not supported for volume profile"}}function Yt(e){Ze.reverseInputs(e);var t=new Zt(e).result;return e.reversedInput&&t.reverse(),Ze.reverseInputs(e),t}Zt.calculate=Yt;class Qt extends Ze{constructor(e){super(e),this.result=[],this.generator=function*(){let e=yield;for(;;)e=yield(e.high+e.low+e.close)/3}(),this.generator.next(),e.low.forEach((t,r)=>{var n=this.generator.next({high:e.high[r],low:e.low[r],close:e.close[r]});this.result.push(n.value)})}nextValue(e){return this.generator.next(e).value}}Qt.calculate=function(e){Ze.reverseInputs(e);var t=new Qt(e).result;return e.reversedInput&&t.reverse(),Ze.reverseInputs(e),t};class er extends Ze{constructor(e){super(e);var t=e.high,r=e.low,n=e.close,i=e.volume,s=e.period,o=new Qt({low:[],high:[],close:[]}),a=new Ne(s,!1,!1,!0),u=new Ne(s,!1,!1,!0);if(r.length!==t.length||t.length!==n.length||t.length!==i.length)throw"Inputs(low,high, close, volumes) not of equal size";this.result=[],this.generator=function*(){var e,t,r=0;let n=null,i=null;for(t=yield,t=yield;;){var{high:l,low:c,close:h,volume:d}=t,p=0,v=0;n=o.nextValue({high:l,low:c,close:h}),r=n*d,null!=n&&null!=i&&(n>i?p=r:v=r,a.push(p),u.push(v),a.totalPushed>=s&&a.totalPushed>=s&&(e=100-100/(1+a.periodSum/u.periodSum))),i=n,t=yield e}}(),this.generator.next(),t.forEach((e,t)=>{var s=this.generator.next({high:e,low:r[t],close:n[t],volume:i[t]});null!=s.value&&this.result.push(parseFloat(s.value.toFixed(2)))})}nextValue(e){var t=this.generator.next(e);if(null!=t.value)return parseFloat(t.value.toFixed(2))}}function tr(e){Ze.reverseInputs(e);var t=new er(e).result;return e.reversedInput&&t.reverse(),Ze.reverseInputs(e),t}er.calculate=tr;class rr extends Ze{constructor(e){super(e);let t=e.values,r=e.rsiPeriod,n=e.stochasticPeriod,i=e.kPeriod,s=e.dPeriod;this.result=[],this.generator=function*(){let e,t,o,a,u=new dt({period:r,values:[]}),l=new Tt({period:n,high:[],low:[],close:[],signalPeriod:i}),c=new Ye({period:s,values:[],format:e=>e});for(var h=yield;;)e=u.nextValue(h),void 0!==e&&(t=l.nextValue({high:e,low:e,close:e}),void 0!==t&&void 0!==t.d&&(o=c.nextValue(t.d),void 0!==o&&(a={stochRSI:t.k,k:t.d,d:o}))),h=yield a}(),this.generator.next(),t.forEach((e,t)=>{var r=this.generator.next(e);void 0!==r.value&&this.result.push(r.value)})}nextValue(e){let t=this.generator.next(e);if(void 0!==t.value)return t.value}}function nr(e){Ze.reverseInputs(e);var t=new rr(e).result;return e.reversedInput&&t.reverse(),Ze.reverseInputs(e),t}rr.calculate=nr;class ir extends Ze{constructor(e){super(e);var t=e.values,r=e.period;this.result=[];var n=new Ne(r,!0,!1,!1);this.generator=function*(){var e,t;for(e=yield;;)n.push(e),n.totalPushed>=r&&(t=n.periodHigh),e=yield t}(),this.generator.next(),t.forEach((e,t)=>{var r=this.generator.next(e);null!=r.value&&this.result.push(r.value)})}nextValue(e){var t=this.generator.next(e);if(null!=t.value)return t.value}}function sr(e){Ze.reverseInputs(e);var t=new ir(e).result;return e.reversedInput&&t.reverse(),Ze.reverseInputs(e),t}ir.calculate=sr;class or extends Ze{constructor(e){super(e);var t=e.values,r=e.period;this.result=[];var n=new Ne(r,!1,!0,!1);this.generator=function*(){var e,t;for(e=yield;;)n.push(e),n.totalPushed>=r&&(t=n.periodLow),e=yield t}(),this.generator.next(),t.forEach((e,t)=>{var r=this.generator.next(e);null!=r.value&&this.result.push(r.value)})}nextValue(e){var t=this.generator.next(e);if(null!=t.value)return t.value}}function ar(e){Ze.reverseInputs(e);var t=new or(e).result;return e.reversedInput&&t.reverse(),Ze.reverseInputs(e),t}or.calculate=ar;class ur extends Ze{constructor(e){super(e);var t=e.values,r=e.period;this.result=[];var n=new Ne(r,!1,!1,!0);this.generator=function*(){var e,t;for(e=yield;;)n.push(e),n.totalPushed>=r&&(t=n.periodSum),e=yield t}(),this.generator.next(),t.forEach((e,t)=>{var r=this.generator.next(e);null!=r.value&&this.result.push(r.value)})}nextValue(e){var t=this.generator.next(e);if(null!=t.value)return t.value}}function lr(e){Ze.reverseInputs(e);var t=new ur(e).result;return e.reversedInput&&t.reverse(),Ze.reverseInputs(e),t}ur.calculate=lr;class cr extends Ze{constructor(e){super(e);let t=e.brickSize||0;if(e.useATR){let r=Ot(Object.assign({},e));t=r[r.length-1]}if(this.result=new Ue,0===t)return void console.error("Not enough data to calculate brickSize for renko when using ATR");let r=0,n=0,i=1/0,s=0,o=0,a=0;this.generator=function*(){let e=yield;for(;;){if(0===r){r=e.close,n=e.high,i=e.low,s=e.close,o=e.volume,a=e.timestamp,e=yield;continue}let u=Math.abs(e.close-s),l=Math.abs(e.close-r);if(u>=t&&l>=t){let a=u>l?r:s,c={open:a,high:n>e.high?n:e.high,low:i<e.Low?i:e.low,close:a>e.close?a-t:a+t,volume:o+e.volume,timestamp:e.timestamp};r=c.open,n=c.close,i=c.close,s=c.close,o=0,e=yield c}else n=n>e.high?n:e.high,i=i<e.Low?i:e.low,o+=e.volume,a=e.timestamp,e=yield}}(),this.generator.next(),e.low.forEach((t,r)=>{var n=this.generator.next({open:e.open[r],high:e.high[r],low:e.low[r],close:e.close[r],volume:e.volume[r],timestamp:e.timestamp[r]});n.value&&(this.result.open.push(n.value.open),this.result.high.push(n.value.high),this.result.low.push(n.value.low),this.result.close.push(n.value.close),this.result.volume.push(n.value.volume),this.result.timestamp.push(n.value.timestamp))})}nextValue(e){return console.error("Cannot calculate next value on Renko, Every value has to be recomputed for every change, use calcualte method"),null}}function hr(e){Ze.reverseInputs(e);var t=new cr(e).result;return e.reversedInput&&(t.open.reverse(),t.high.reverse(),t.low.reverse(),t.close.reverse(),t.volume.reverse(),t.timestamp.reverse()),Ze.reverseInputs(e),t}cr.calculate=hr;class dr extends Ze{constructor(e){super(e),this.result=new Ue;let t=null,r=0,n=1/0,i=0,s=0,o=0;this.generator=function*(){let e=yield,a=null;for(;;){if(null===t)t=(e.close+e.open)/2,r=e.high,n=e.low,i=(e.close+e.open+e.high+e.low)/4,s=e.volume||0,o=e.timestamp||0,a={open:t,high:r,low:n,close:i,volume:e.volume||0,timestamp:e.timestamp||0};else{let s=(e.close+e.open+e.high+e.low)/4,o=(t+i)/2,u=Math.max(o,s,e.high),l=Math.min(e.low,o,s);a={close:s,open:o,high:u,low:l,volume:e.volume||0,timestamp:e.timestamp||0},i=s,t=o,r=u,n=l}e=yield a}}(),this.generator.next(),e.low.forEach((t,r)=>{var n=this.generator.next({open:e.open[r],high:e.high[r],low:e.low[r],close:e.close[r],volume:e.volume?e.volume[r]:e.volume,timestamp:e.timestamp?e.timestamp[r]:e.timestamp});n.value&&(this.result.open.push(n.value.open),this.result.high.push(n.value.high),this.result.low.push(n.value.low),this.result.close.push(n.value.close),this.result.volume.push(n.value.volume),this.result.timestamp.push(n.value.timestamp))})}nextValue(e){return this.generator.next(e).value}}function pr(e){Ze.reverseInputs(e);var t=new dr(e).result;return e.reversedInput&&(t.open.reverse(),t.high.reverse(),t.low.reverse(),t.close.reverse(),t.volume.reverse(),t.timestamp.reverse()),Ze.reverseInputs(e),t}dr.calculate=pr;class vr{constructor(){}approximateEqual(e,t){return 1*parseFloat(Math.abs(e-t).toPrecision(4))<=1*parseFloat((.001*e).toPrecision(4))}logic(e){throw"this has to be implemented"}getAllPatternIndex(e){if(e.close.length<this.requiredCount)return console.warn("Data count less than data required for the strategy ",this.name),[];e.reversedInput&&(e.open.reverse(),e.high.reverse(),e.low.reverse(),e.close.reverse());let t=this.logic;return this._generateDataForCandleStick(e).map((e,r)=>t.call(this,e)?r:void 0).filter(e=>e)}hasPattern(e){return e.close.length<this.requiredCount?(console.warn("Data count less than data required for the strategy ",this.name),!1):(e.reversedInput&&(e.open.reverse(),e.high.reverse(),e.low.reverse(),e.close.reverse()),this.logic.call(this,this._getLastDataForCandleStick(e)))}_getLastDataForCandleStick(e){let t=this.requiredCount;if(e.close.length===t)return e;{let r={open:[],high:[],low:[],close:[]},n=0,i=e.close.length-t;for(;n<t;)r.open.push(e.open[i+n]),r.high.push(e.high[i+n]),r.low.push(e.low[i+n]),r.close.push(e.close[i+n]),n++;return r}}_generateDataForCandleStick(e){let t=this.requiredCount;return e.close.map(function(r,n){let i=0,s={open:[],high:[],low:[],close:[]};for(;i<t;)s.open.push(e.open[n+i]),s.high.push(e.high[n+i]),s.low.push(e.low[n+i]),s.close.push(e.close[n+i]),i++;return s}).filter((r,n)=>n<=e.close.length-t)}}class fr extends vr{constructor(){super(),this.name="MorningStar",this.requiredCount=3}logic(e){let t=e.open[0],r=e.close[0],n=e.low[0],i=e.high[1],s=e.low[1],o=e.open[2],a=e.close[2];return r<t&&n>s&&n>i&&i<n&&s<n&&o>i&&e.close[1]<o&&o<a&&a>(t+r)/2}}function gr(e){return(new fr).hasPattern(e)}class mr extends vr{constructor(){super(),this.name="BullishEngulfingPattern",this.requiredCount=2}logic(e){let t=e.open[0],r=e.close[0],n=e.open[1];return r<t&&t>n&&r>n&&t<e.close[1]}}function wr(e){return(new mr).hasPattern(e)}class yr extends vr{constructor(){super(),this.requiredCount=2,this.name="BullishHarami"}logic(e){let t=e.open[0],r=e.close[0],n=e.open[1];return t>n&&r<n&&r<e.close[1]&&t>e.low[1]&&e.high[0]>e.high[1]}}function xr(e){return(new yr).hasPattern(e)}class br extends vr{constructor(){super(),this.requiredCount=2,this.name="BullishHaramiCross"}logic(e){let t=e.open[0],r=e.close[0],n=e.open[1],i=e.close[1],s=t>n&&r<n&&r<i&&t>e.low[1]&&e.high[0]>e.high[1],o=this.approximateEqual(n,i);return s&&o}}function _r(e){return(new br).hasPattern(e)}class Ir extends vr{constructor(){super(),this.name="Doji",this.requiredCount=1}logic(e){let t=e.open[0],r=e.close[0],n=e.high[0],i=e.low[0],s=this.approximateEqual(t,r),o=s&&this.approximateEqual(t,n),a=s&&this.approximateEqual(r,i);return s&&o==a}}function Cr(e){return(new Ir).hasPattern(e)}class Sr extends vr{constructor(){super(),this.name="MorningDojiStar",this.requiredCount=3}logic(e){let t=e.open[0],r=e.close[0],n=e.low[0],i=e.open[1],s=e.close[1],o=e.high[1],a=e.low[1],u=e.open[2],l=e.close[2],c=(t+r)/2,h=r<t,d=(new Ir).hasPattern({open:[i],close:[s],high:[o],low:[a]});return h&&d&&u<l&&o<n&&a<n&&u>o&&s<u&&l>c}}function Or(e){return(new Sr).hasPattern(e)}class Er extends vr{constructor(){super(),this.requiredCount=3,this.name="DownsideTasukiGap"}logic(e){let t=e.close[0],r=e.open[1],n=e.close[1],i=e.open[2],s=e.close[2];return t<e.open[0]&&n<r&&s>i&&e.high[1]<e.low[0]&&r>i&&n<i&&s>r&&s<t}}function Pr(e){return(new Er).hasPattern(e)}class Mr extends vr{constructor(){super(),this.name="BullishMarubozu",this.requiredCount=1}logic(e){let t=e.open[0],r=e.close[0],n=e.high[0],i=e.low[0];return this.approximateEqual(r,n)&&this.approximateEqual(i,t)&&t<r&&t<n}}function Fr(e){return(new Mr).hasPattern(e)}class Ar extends vr{constructor(){super(),this.requiredCount=2,this.name="PiercingLine"}logic(e){let t=e.open[0],r=e.close[0],n=e.low[0],i=e.open[1],s=e.close[1];return e.low[1]<n&&r<t&&n>i&&s>(t+r)/2&&s>i}}function Lr(e){return(new Ar).hasPattern(e)}class Tr extends vr{constructor(){super(),this.name="ThreeWhiteSoldiers",this.requiredCount=3}logic(e){let t=e.close[0],r=e.high[0],n=e.open[1],i=e.close[1],s=e.high[1],o=e.open[2];return s>r&&e.high[2]>s&&e.open[0]<t&&n<i&&o<e.close[2]&&t>n&&n<r&&s>o&&o<i}}function Vr(e){return(new Tr).hasPattern(e)}class Dr extends vr{constructor(){super(),this.name="BullishHammerStick",this.requiredCount=1}logic(e){let t=e.open[0],r=e.close[0],n=e.low[0],i=r>t;return i=i&&this.approximateEqual(r,e.high[0]),i=i&&r-t<=2*(t-n),i}}function kr(e){return(new Dr).hasPattern(e)}class zr extends vr{constructor(){super(),this.name="BullishInvertedHammerStick",this.requiredCount=1}logic(e){let t=e.open[0],r=e.close[0],n=e.high[0],i=r>t;return i=i&&this.approximateEqual(t,e.low[0]),i=i&&r-t<=2*(n-r),i}}function qr(e){return(new zr).hasPattern(e)}class Br extends vr{constructor(){super(),this.name="BearishHammerStick",this.requiredCount=1}logic(e){let t=e.open[0],r=e.close[0],n=e.low[0],i=t>r;return i=i&&this.approximateEqual(t,e.high[0]),i=i&&t-r<=2*(r-n),i}}function Rr(e){return(new Br).hasPattern(e)}class Hr extends vr{constructor(){super(),this.name="BearishInvertedHammerStick",this.requiredCount=1}logic(e){let t=e.open[0],r=e.close[0],n=e.high[0],i=t>r;return i=i&&this.approximateEqual(r,e.low[0]),i=i&&t-r<=2*(n-t),i}}function jr(e){return(new Hr).hasPattern(e)}class Nr extends vr{constructor(){super(),this.name="HammerPattern",this.requiredCount=5}logic(e){let t=this.downwardTrend(e);return t=t&&this.includesHammer(e),t=t&&this.hasConfirmation(e),t}downwardTrend(e,t=!0){let r=t?3:4,n=lt({values:e.close.slice(0,r),period:r-1});return ht({values:e.close.slice(0,r),period:r-1})>n}includesHammer(e,t=!0){let r=t?3:4,n=t?4:void 0,i={open:e.open.slice(r,n),close:e.close.slice(r,n),low:e.low.slice(r,n),high:e.high.slice(r,n)},s=Rr(i);return s=s||jr(i),s=s||kr(i),s=s||qr(i),s}hasConfirmation(e){let t=e.close[4];return e.open[4]<t&&e.close[3]<t}}function Gr(e){return(new Nr).hasPattern(e)}class Ur extends Nr{constructor(){super(),this.name="HammerPatternUnconfirmed"}logic(e){let t=this.downwardTrend(e,!1);return t=t&&this.includesHammer(e,!1),t}}function Xr(e){return(new Ur).hasPattern(e)}class Wr extends vr{constructor(){super(),this.name="TweezerBottom",this.requiredCount=5}logic(e){return this.downwardTrend(e)&&e.low[3]==e.low[4]}downwardTrend(e){let t=lt({values:e.close.slice(0,3),period:2});return ht({values:e.close.slice(0,3),period:2})>t}}function Kr(e){return(new Wr).hasPattern(e)}let $r=[new mr,new Er,new yr,new br,new Sr,new fr,new Mr,new Ar,new Tr,new Dr,new zr,new Nr,new Ur,new Wr];class Jr extends vr{constructor(){super(),this.name="Bullish Candlesticks"}hasPattern(e){return $r.reduce(function(t,r){let n=r.hasPattern(e);return t||n},!1)}}function Zr(e){return(new Jr).hasPattern(e)}class Yr extends vr{constructor(){super(),this.name="BearishEngulfingPattern",this.requiredCount=2}logic(e){let t=e.open[0],r=e.close[0],n=e.open[1];return r>t&&t<n&&r<n&&t>e.close[1]}}function Qr(e){return(new Yr).hasPattern(e)}class en extends vr{constructor(){super(),this.requiredCount=2,this.name="BearishHarami"}logic(e){let t=e.open[0],r=e.close[0],n=e.open[1];return t<n&&r>n&&r>e.close[1]&&t<e.low[1]&&e.high[0]>e.high[1]}}function tn(e){return(new en).hasPattern(e)}class rn extends vr{constructor(){super(),this.requiredCount=2,this.name="BearishHaramiCross"}logic(e){let t=e.open[0],r=e.close[0],n=e.open[1],i=e.close[1],s=t<n&&r>n&&r>i&&t<e.low[1]&&e.high[0]>e.high[1],o=this.approximateEqual(n,i);return s&&o}}function nn(e){return(new rn).hasPattern(e)}class sn extends vr{constructor(){super(),this.name="EveningDojiStar",this.requiredCount=3}logic(e){let t=e.open[0],r=e.close[0],n=e.high[0],i=e.open[1],s=e.close[1],o=e.high[1],a=e.low[1],u=e.open[2],l=e.close[2],c=(t+r)/2,h=r>t,d=(new Ir).hasPattern({open:[i],close:[s],high:[o],low:[a]});return h&&d&&o>n&&a>n&&u<a&&s>u&&u>l&&l<c}}function on(e){return(new sn).hasPattern(e)}class an extends vr{constructor(){super(),this.name="EveningStar",this.requiredCount=3}logic(e){let t=e.open[0],r=e.close[0],n=e.high[0],i=e.high[1],s=e.low[1],o=e.open[2],a=e.close[2];return r>t&&n<s&&n<i&&i>n&&s>n&&o<s&&e.close[1]>o&&o>a&&a<(t+r)/2}}function un(e){return(new an).hasPattern(e)}class ln extends vr{constructor(){super(),this.name="BearishMarubozu",this.requiredCount=1}logic(e){let t=e.open[0],r=e.close[0],n=e.low[0];return this.approximateEqual(t,e.high[0])&&this.approximateEqual(n,r)&&t>r&&t>n}}function cn(e){return(new ln).hasPattern(e)}class hn extends vr{constructor(){super(),this.name="ThreeBlackCrows",this.requiredCount=3}logic(e){let t=e.open[0],r=e.close[0],n=e.open[1],i=e.close[1],s=e.low[1],o=e.open[2];return e.low[0]>s&&s>e.low[2]&&t>r&&n>i&&o>e.close[2]&&t>n&&n>r&&n>o&&o>i}}function dn(e){return(new hn).hasPattern(e)}class pn extends vr{constructor(){super(),this.name="HangingMan",this.requiredCount=5}logic(e){let t=this.upwardTrend(e);return t=t&&this.includesHammer(e),t=t&&this.hasConfirmation(e),t}upwardTrend(e,t=!0){let r=t?3:4;return lt({values:e.close.slice(0,r),period:r-1})>ht({values:e.close.slice(0,r),period:r-1})}includesHammer(e,t=!0){let r=t?3:4,n=t?4:void 0,i={open:e.open.slice(r,n),close:e.close.slice(r,n),low:e.low.slice(r,n),high:e.high.slice(r,n)},s=Rr(i);return s=s||kr(i),s}hasConfirmation(e){let t=e.close[4];return e.open[4]>t&&e.close[3]>t}}function vn(e){return(new pn).hasPattern(e)}class fn extends pn{constructor(){super(),this.name="HangingManUnconfirmed"}logic(e){let t=this.upwardTrend(e,!1);return t=t&&this.includesHammer(e,!1),t}}function gn(e){return(new fn).hasPattern(e)}class mn extends vr{constructor(){super(),this.name="ShootingStar",this.requiredCount=5}logic(e){let t=this.upwardTrend(e);return t=t&&this.includesHammer(e),t=t&&this.hasConfirmation(e),t}upwardTrend(e,t=!0){let r=t?3:4;return lt({values:e.close.slice(0,r),period:r-1})>ht({values:e.close.slice(0,r),period:r-1})}includesHammer(e,t=!0){let r=t?3:4,n=t?4:void 0,i={open:e.open.slice(r,n),close:e.close.slice(r,n),low:e.low.slice(r,n),high:e.high.slice(r,n)},s=jr(i);return s=s||qr(i),s}hasConfirmation(e){let t=e.close[4];return e.open[4]>t&&e.close[3]>t}}function wn(e){return(new mn).hasPattern(e)}class yn extends mn{constructor(){super(),this.name="ShootingStarUnconfirmed"}logic(e){let t=this.upwardTrend(e,!1);return t=t&&this.includesHammer(e,!1),t}}function xn(e){return(new yn).hasPattern(e)}class bn extends vr{constructor(){super(),this.name="TweezerTop",this.requiredCount=5}logic(e){return this.upwardTrend(e)&&e.high[3]==e.high[4]}upwardTrend(e){return lt({values:e.close.slice(0,3),period:2})>ht({values:e.close.slice(0,3),period:2})}}function _n(e){return(new bn).hasPattern(e)}let In=[new Yr,new en,new rn,new sn,new an,new ln,new hn,new Br,new Hr,new pn,new fn,new mn,new yn,new bn];class Cn extends vr{constructor(){super(),this.name="Bearish Candlesticks"}hasPattern(e){return In.reduce(function(t,r){return t||r.hasPattern(e)},!1)}}function Sn(e){return(new Cn).hasPattern(e)}class On extends vr{constructor(){super(),this.name="AbandonedBaby",this.requiredCount=3}logic(e){let t=e.open[0],r=e.low[0],n=e.open[1],i=e.close[1],s=e.high[1],o=e.low[1],a=e.open[2],u=e.close[2],l=e.high[2],c=e.low[2],h=e.close[0]<t,d=(new Ir).hasPattern({open:[n],close:[i],high:[s],low:[o]});return h&&d&&s<r&&c>s&&u>a&&l<t}}function En(e){return(new On).hasPattern(e)}class Pn extends vr{constructor(){super(),this.name="DarkCloudCover",this.requiredCount=2}logic(e){let t=e.open[0],r=e.close[0],n=e.open[1],i=e.close[1];return r>t&&i<n&&n>e.high[0]&&i<(r+t)/2&&i>t}}function Mn(e){return(new Pn).hasPattern(e)}class Fn extends vr{constructor(){super(),this.requiredCount=1,this.name="DragonFlyDoji"}logic(e){let t=e.open[0],r=e.close[0],n=e.high[0],i=e.low[0],s=this.approximateEqual(t,r),o=s&&this.approximateEqual(t,n),a=s&&this.approximateEqual(r,i);return s&&o&&!a}}function An(e){return(new Fn).hasPattern(e)}class Ln extends vr{constructor(){super(),this.requiredCount=1,this.name="GraveStoneDoji"}logic(e){let t=e.open[0],r=e.close[0],n=e.high[0],i=e.low[0],s=this.approximateEqual(t,r),o=s&&this.approximateEqual(t,n),a=s&&this.approximateEqual(r,i);return s&&a&&!o}}function Tn(e){return(new Ln).hasPattern(e)}class Vn extends vr{constructor(){super(),this.name="BullishSpinningTop",this.requiredCount=1}logic(e){let t=e.open[0],r=e.close[0],n=e.high[0],i=e.low[0],s=Math.abs(r-t),o=Math.abs(n-r),a=Math.abs(t-i);return s<o&&s<a}}function Dn(e){return(new Vn).hasPattern(e)}class kn extends vr{constructor(){super(),this.name="BearishSpinningTop",this.requiredCount=1}logic(e){let t=e.open[0],r=e.high[0],n=e.low[0],i=Math.abs(e.close[0]-t),s=Math.abs(r-t),o=Math.abs(r-n);return i<s&&i<o}}function zn(e){return(new kn).hasPattern(e)}function qn(e,t){let r;return r=[0,23.6,38.2,50,61.8,78.6,100,127.2,161.8,261.8,423.6].map(e<t?function(r){let n=t-Math.abs(e-t)*r/100;return n>0?n:0}:function(r){let n=t+Math.abs(e-t)*r/100;return n>0?n:0}),r}class Bn extends Ze{constructor(e){super(e),this.result=[];var t=Object.assign({},{conversionPeriod:9,basePeriod:26,spanPeriod:52,displacement:26},e),r=new Ne(2*t.conversionPeriod,!0,!0,!1),n=new Ne(2*t.basePeriod,!0,!0,!1),i=new Ne(2*t.spanPeriod,!0,!0,!1);this.generator=function*(){let e,s,o=Math.max(t.conversionPeriod,t.basePeriod,t.spanPeriod,t.displacement),a=1;for(s=yield;;){if(r.push(s.high),r.push(s.low),n.push(s.high),n.push(s.low),i.push(s.high),i.push(s.low),a<o)a++;else{let t=(r.periodHigh+r.periodLow)/2,s=(n.periodHigh+n.periodLow)/2;e={conversion:t,base:s,spanA:(t+s)/2,spanB:(i.periodHigh+i.periodLow)/2}}s=yield e}}(),this.generator.next(),e.low.forEach((t,r)=>{var n=this.generator.next({high:e.high[r],low:e.low[r]});n.value&&this.result.push(n.value)})}nextValue(e){return this.generator.next(e).value}}function Rn(e){Ze.reverseInputs(e);var t=new Bn(e).result;return e.reversedInput&&t.reverse(),Ze.reverseInputs(e),t}Bn.calculate=Rn;class Hn extends Je{constructor(){super(...arguments),this.maPeriod=20,this.atrPeriod=10,this.useSMA=!1,this.multiplier=1}}class jn extends Je{}class Nn extends Ze{constructor(e){super(e);var t,r=new(e.useSMA?Ye:et)({period:e.maPeriod,values:[],format:e=>e}),n=new St({period:e.atrPeriod,high:[],low:[],close:[],format:e=>e});this.result=[],this.generator=function*(){var i;for(t=yield;;){var{close:s}=t,o=r.nextValue(s),a=n.nextValue(t);null!=o&&null!=a&&(i={middle:o,upper:o+e.multiplier*a,lower:o-e.multiplier*a}),t=yield i}}(),this.generator.next(),e.high.forEach((t,r)=>{var n=this.generator.next({high:t,low:e.low[r],close:e.close[r]});null!=n.value&&this.result.push(n.value)})}nextValue(e){var t=this.generator.next(e);if(null!=t.value)return t.value}}function Gn(e){Ze.reverseInputs(e);var t=new Nn(e).result;return e.reversedInput&&t.reverse(),Ze.reverseInputs(e),t}Nn.calculate=Gn;class Un extends Je{constructor(){super(...arguments),this.period=22,this.multiplier=3}}class Xn extends Je{}class Wn extends Ze{constructor(e){super(e);var t=e.high,r=e.low,n=e.close;this.result=[];var i=new St({period:e.period,high:[],low:[],close:[],format:e=>e}),s=new Ne(2*e.period,!0,!0,!1);this.generator=function*(){for(var t,r,n=yield;;){var{high:o,low:a}=n;s.push(o),s.push(a),r=i.nextValue(n),s.totalPushed>=2*e.period&&null!=r&&(t={exitLong:s.periodHigh-r*e.multiplier,exitShort:s.periodLow+r*e.multiplier}),n=yield t}}(),this.generator.next(),t.forEach((e,t)=>{var i=this.generator.next({high:e,low:r[t],close:n[t]});null!=i.value&&this.result.push(i.value)})}nextValue(e){var t=this.generator.next(e);if(null!=t.value)return t.value}}function Kn(e){Ze.reverseInputs(e);var t=new Wn(e).result;return e.reversedInput&&t.reverse(),Ze.reverseInputs(e),t}Wn.calculate=Kn;class $n extends Ze{constructor(e){super(e),this.lineA=e.lineA,this.lineB=e.lineB;var t=[],r=[];this.generator=function*(){for(var e=yield,n=!1;;){t.unshift(e.valueA),r.unshift(e.valueB),n=e.valueA>e.valueB;for(var i=1;!0===n&&t[i]>=r[i];)t[i]>r[i]?n=!1:t[i]<r[i]?n=!0:t[i]===r[i]&&(i+=1);!0===n&&(t=[e.valueA],r=[e.valueB]),e=yield n}}(),this.generator.next(),this.result=[],this.lineA.forEach((e,t)=>{var r=this.generator.next({valueA:this.lineA[t],valueB:this.lineB[t]});void 0!==r.value&&this.result.push(r.value)})}static reverseInputs(e){e.reversedInput&&(e.lineA&&e.lineA.reverse(),e.lineB&&e.lineB.reverse())}nextValue(e,t){return this.generator.next({valueA:e,valueB:t}).value}}function Jn(e){Ze.reverseInputs(e);var t=new $n(e).result;return e.reversedInput&&t.reverse(),Ze.reverseInputs(e),t}$n.calculate=Jn;class Zn extends Ze{constructor(e){super(e),this.lineA=e.lineA,this.lineB=e.lineB;var t=[],r=[];this.generator=function*(){for(var e=yield,n=!1;;){t.unshift(e.valueA),r.unshift(e.valueB),n=e.valueA<e.valueB;for(var i=1;!0===n&&t[i]<=r[i];)t[i]<r[i]?n=!1:t[i]>r[i]?n=!0:t[i]===r[i]&&(i+=1);!0===n&&(t=[e.valueA],r=[e.valueB]),e=yield n}}(),this.generator.next(),this.result=[],this.lineA.forEach((e,t)=>{var r=this.generator.next({valueA:this.lineA[t],valueB:this.lineB[t]});void 0!==r.value&&this.result.push(r.value)})}static reverseInputs(e){e.reversedInput&&(e.lineA&&e.lineA.reverse(),e.lineB&&e.lineB.reverse())}nextValue(e,t){return this.generator.next({valueA:e,valueB:t}).value}}function Yn(e){Ze.reverseInputs(e);var t=new Zn(e).result;return e.reversedInput&&t.reverse(),Ze.reverseInputs(e),t}Zn.calculate=Yn;let Qn=(()=>{class e{constructor(e){this.TIService=e,this.TA=n,console.log(n)}kellyCriterion(e,t,r){return e/r-(1-e)/t}}return e.\u0275fac=function(t){return new(t||e)(o.Xb(H))},e.\u0275prov=o.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),ei=(()=>{class e{constructor(e,t){this.TIService=e,this.TAService=t,this.outputs=[],this.richOutputs=[]}getGravityRatio(e){const t=this.TIService.gravity(e),r=[];for(const[n,i]of e.entries())r.push([+((i[0]-+t[n])/+t[n]).toFixed(4),+((i[1]-+t[n])/+t[n]).toFixed(4),+((i[2]-+t[n])/+t[n]).toFixed(4),+((i[3]-+t[n])/+t[n]).toFixed(4)]);return r}getSortedGravityDistanceList(e,t){const r=this.getGravityRatio(e),n=r.slice(t[0],t[1]+1),i=[];for(let s=72;s<e.length-n.length;s++){const e=[s];if(!r[s][0])continue;let t=0;for(let i=0;i<n.length;i++){const o=r[s+i][1],a=r[s+i][2],u=r[s+i][3],l=Math.pow(r[s+i][0]-n[i][0],2),c=Math.pow(o-n[i][1],2),h=Math.pow(a-n[i][2],2),d=Math.pow(u-n[i][3],2),p=Math.sqrt(l+c+h+d);e.push(p),t+=p}e.push(t),i.push(e)}return i.sort((e,t)=>e[e.length-1]-t[t.length-1])}findGravitySimilarity(e,t,r){const n=this.getSortedGravityDistanceList(e,t);this.richOutputs=[];for(let i=0;i<6;i++){const t=n[i][0],s=n[i].length-2,o=e[t+s-1],a=e[t+s],u=e[t+s+2],l=e[t+s+6];let c,h,d;if(a){c=(a[1]-o[1])/o[1];const e=`#${i} \u7b2c\u4e00\u5929\u6da8\u5e45\uff1a${(100*c).toFixed(1)+"%"}`;this.outputs.push(e)}if(u){h=(u[1]-o[1])/o[1];const e=`#${i} \u7b2c\u4e09\u5929\u6da8\u5e45\uff1a${(100*h).toFixed(1)+"%"}`;this.outputs.push(e)}if(l){d=(l[1]-o[1])/o[1];const e=`#${i} \u7b2c\u4e03\u5929\u6da8\u5e45\uff1a${(100*d).toFixed(1)+"%"}`;this.outputs.push(e)}const p=n[i][n[i].length-1];this.richOutputs.push({index:i,similarity:p,normalizedPercentage:1-p/n[n.length-1][n[i].length-1],time:new Date(r.categoryData[t]),afterOneDayRatio:c,afterThreeDayRatio:h,afterSevenDayRatio:d})}return n}}return e.\u0275fac=function(t){return new(t||e)(o.Xb(H),o.Xb(Qn))},e.\u0275prov=o.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var ti=r("Txg/"),ri=r("XiUz"),ni=r("znSr");function ii(e,t){1&e&&(o.Tb(0,"span"),o.Fc(1,"1 Day"),o.Sb())}function si(e,t){1&e&&(o.Tb(0,"span"),o.Fc(1,"3 Day"),o.Sb())}function oi(e,t){1&e&&(o.Tb(0,"span"),o.Fc(1,"7 Day"),o.Sb())}const ai=function(e,t,r,n,i,s){return{green:e,red:t,green2:r,red2:n,green3:i,red3:s}};function ui(e,t){if(1&e&&(o.Tb(0,"div",14),o.Fc(1,"\n            "),o.Tb(2,"b"),o.Fc(3),o.gc(4,"percent"),o.Sb(),o.Fc(5,"\n            "),o.Dc(6,ii,2,0,"span",15),o.Fc(7,"\n            "),o.Dc(8,si,2,0,"span",15),o.Fc(9,"\n            "),o.Dc(10,oi,2,0,"span",15),o.Fc(11,"\n          "),o.Sb()),2&e){const e=t.$implicit,r=t.index;o.lc("ngClass",o.qc(8,ai,e>0,e<0,e>.05,e<-.05,e>.1,e<-.1)),o.Bb(3),o.Hc("\n              ",o.ic(4,5,e||0,".2"),"\n            "),o.Bb(3),o.lc("ngIf",0==r),o.Bb(2),o.lc("ngIf",1==r),o.Bb(2),o.lc("ngIf",2==r)}}const li=function(){return{border:"1px solid #ff0"}},ci=function(e,t,r){return[e,t,r]};function hi(e,t){if(1&e&&(o.Tb(0,"div",11),o.Fc(1,"\n        "),o.Tb(2,"div"),o.Fc(3),o.gc(4,"number"),o.gc(5,"percent"),o.Sb(),o.Fc(6,"\n        "),o.Tb(7,"span"),o.Fc(8),o.gc(9,"date"),o.Sb(),o.Fc(10,"\n        "),o.Tb(11,"div",12),o.Fc(12,"\n          "),o.Dc(13,ui,12,15,"div",13),o.Fc(14,"\n        "),o.Sb(),o.Fc(15,"\n      "),o.Sb()),2&e){const e=t.$implicit;o.lc("ngStyle",o.mc(14,li)),o.Bb(3),o.Jc("\n          #",e.index," (",o.ic(4,6,e.similarity,".1-3"),") (",o.hc(5,9,e.normalizedPercentage),")\n        "),o.Bb(5),o.Hc(" \u65f6\u95f4\uff1a",o.ic(9,11,e.time,"yyyy-MM-dd")," "),o.Bb(5),o.lc("ngForOf",o.pc(15,ci,e.afterOneDayRatio,e.afterThreeDayRatio,e.afterSevenDayRatio))}}function di(e,t){if(1&e&&(o.Tb(0,"p"),o.Fc(1),o.Sb()),2&e){const e=t.$implicit;o.Bb(1),o.Hc("\n        ",e,"\n      ")}}const pi=function(){return{height:"auto"}},vi=new ti.b("Technical Analysis"),fi=[{path:"",component:(()=>{class e{constructor(e,t,r,n){this._ngZone=e,this.dialog=t,this.cs=r,this.gravitySimilarityService=n,this.selectedRange=[],this.chartOption=this.cs.getChartOption(this.cs.categoryData,this.cs.oclhv,this.cs.volumes)}ngOnInit(){return s(this,void 0,void 0,function*(){vi.debug("ngOnInit()"),yield this.cs.fetchOHLCV(),this.echartsInstance.setOption(this.cs.getChartOption(this.cs.categoryData,this.cs.oclhv,this.cs.volumes),!0),this.echartsInstance.dispatchAction({type:"brush",areas:[{brushType:"lineX",coordRange:[this.cs.categoryData[this.cs.categoryData.length-6],this.cs.categoryData[this.cs.categoryData.length-2]],xAxisIndex:0}]})})}onChartInit(e){vi.debug("onChartInit()"),this.echartsInstance=e,this.echartsInstance.on("brushEnd",e=>{"rect"===e.areas[0].brushType?this.selectedRange=e.areas[0].coordRange[0]:"lineX"===e.areas[0].brushType&&(this.selectedRange=e.areas[0].coordRange)})}start(){if(this.selectedRange.length>0){const e=this.gravitySimilarityService.findGravitySimilarity(this.cs.oclhv,this.selectedRange,{limit:6,categoryData:this.cs.categoryData}),t=[];for(let r=0;r<6;r++)t.push({name:"\u76f8\u4f3c",coord:[this.cs.categoryData[e[r][0]],1.1*this.cs.oclhv[e[r][0]][2]],value:r+": "+e[r][e[r].length-1].toFixed(4),itemStyle:{color:"rgb(141,60,85)"}});this.echartsInstance.setOption(this.cs.getChartOption(this.cs.categoryData,this.cs.oclhv,this.cs.volumes,{kline:{markPointData:t}}),!0)}else vi.error("Range invalid")}openSelectSymbolDialog(){this.dialog.open(Re).afterClosed().subscribe(e=>s(this,void 0,void 0,function*(){e&&(yield this.cs.fetchOHLCV(),this.echartsInstance.setOption(this.cs.getChartOption(this.cs.categoryData,this.cs.oclhv,this.cs.volumes),!0))}))}test(){this.gravitySimilarityService.getGravityRatio(this.cs.oclhv)}}return e.\u0275fac=function(t){return new(t||e)(o.Nb(o.B),o.Nb(R.b),o.Nb(U),o.Nb(ei))},e.\u0275cmp=o.Hb({type:e,selectors:[["app-main-chart"]],decls:39,vars:11,consts:[["fxLayout","row",1,"main-wrap"],[1,"main-chart"],["fxLayout","row","fxLayoutAlign","left center",1,"chart-tool-bar"],["mat-button","",1,"tool-bar-item","exchange","symbol",3,"click"],["mat-button","",3,"click"],["echarts","",1,"demo-chart",3,"options","initOpts","chartInit"],[1,"side-control"],[1,"control-card","gravity-similarity"],["class","future-card",3,"ngStyle",4,"ngFor","ngForOf"],[1,"outputs"],[4,"ngFor","ngForOf"],[1,"future-card",3,"ngStyle"],["fxLayout","row","fxLayoutAlign","space-between center"],["class","future-card","fxLayout","column","fxLayoutAlign","center center",3,"ngClass",4,"ngFor","ngForOf"],["fxLayout","column","fxLayoutAlign","center center",1,"future-card",3,"ngClass"],[4,"ngIf"]],template:function(e,t){1&e&&(o.Tb(0,"div",0),o.Fc(1,"\n  "),o.Tb(2,"div",1),o.Fc(3,"\n    "),o.Tb(4,"div",2),o.Fc(5,"\n      "),o.Tb(6,"button",3),o.bc("click",function(){return t.openSelectSymbolDialog()}),o.Fc(7),o.gc(8,"uppercase"),o.gc(9,"uppercase"),o.Sb(),o.Fc(10,"\n      "),o.Tb(11,"button",4),o.bc("click",function(){return t.test()}),o.Fc(12,"test"),o.Sb(),o.Fc(13,"\n    "),o.Sb(),o.Fc(14,"\n    "),o.Tb(15,"div",5),o.bc("chartInit",function(e){return t.onChartInit(e)}),o.Sb(),o.Fc(16,"\n  "),o.Sb(),o.Fc(17,"\n  "),o.Fc(18,"\n  "),o.Tb(19,"div",6),o.Fc(20,"\n    "),o.Tb(21,"div",7),o.Fc(22,"\n      "),o.Tb(23,"h2"),o.Fc(24,"G \u76f8\u4f3c\u76d8"),o.Sb(),o.Fc(25,"\n      "),o.Tb(26,"button",4),o.bc("click",function(){return t.start()}),o.Fc(27,"Start"),o.Sb(),o.Fc(28,"\n      "),o.Dc(29,hi,16,19,"div",8),o.Fc(30,"\n    "),o.Sb(),o.Fc(31,"\n\n    "),o.Tb(32,"div",9),o.Fc(33,"\n      "),o.Dc(34,di,2,1,"p",10),o.Fc(35,"\n    "),o.Sb(),o.Fc(36,"\n  "),o.Sb(),o.Fc(37,"\n"),o.Sb(),o.Fc(38,"\n")),2&e&&(o.Bb(7),o.Ic("\n        ",o.hc(8,6,t.cs.exchange),"\n        ",o.hc(9,8,t.cs.symbol),"\n      "),o.Bb(8),o.lc("options",t.chartOption)("initOpts",o.mc(10,pi)),o.Bb(14),o.lc("ngForOf",t.gravitySimilarityService.richOutputs),o.Bb(5),o.lc("ngForOf",t.cs.outputs))},directives:[ri.c,ri.b,ke.a,T,i.l,i.n,ni.c,i.k,ni.a,i.m],pipes:[i.v,i.f,i.t,i.e],styles:[".demo-chart[_ngcontent-%COMP%]{width:100%;height:calc(100% - 38px)}.main-wrap[_ngcontent-%COMP%]{height:100%;background-color:#f4f4f4}.main-wrap[_ngcontent-%COMP%]   .main-chart[_ngcontent-%COMP%]{height:100%;width:100%}.main-wrap[_ngcontent-%COMP%]   .side-control[_ngcontent-%COMP%]{width:300px}.chart-tool-bar[_ngcontent-%COMP%]{height:38px;background-color:#fff}.chart-tool-bar[_ngcontent-%COMP%]   .tool-bar-item[_ngcontent-%COMP%]{padding:0 8px}.control-card[_ngcontent-%COMP%]{padding:8px;background-color:#fff}.gravity-similarity[_ngcontent-%COMP%]   .future-card[_ngcontent-%COMP%]{width:100%;margin:8px 8px 8px 0;padding:8px 0;border-radius:8px}.gravity-similarity[_ngcontent-%COMP%]   .future-card[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{font-size:14px;color:#555}.gravity-similarity[_ngcontent-%COMP%]   .future-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;color:#9598a1}.gravity-similarity[_ngcontent-%COMP%]   .future-card[_ngcontent-%COMP%]:last-child{margin-right:0}.gravity-similarity[_ngcontent-%COMP%]   .green[_ngcontent-%COMP%]{background-color:rgba(0,191,165,.1)}.gravity-similarity[_ngcontent-%COMP%]   .green[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{color:#26a69a}.gravity-similarity[_ngcontent-%COMP%]   .green.green2[_ngcontent-%COMP%]{background-color:rgba(0,191,165,.2)}.gravity-similarity[_ngcontent-%COMP%]   .green.green3[_ngcontent-%COMP%]{background-color:rgba(0,191,165,.3)}.gravity-similarity[_ngcontent-%COMP%]   .red[_ngcontent-%COMP%]{background-color:rgba(244,67,54,.1)}.gravity-similarity[_ngcontent-%COMP%]   .red[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{color:#ef5350}.gravity-similarity[_ngcontent-%COMP%]   .red.red2[_ngcontent-%COMP%]{background-color:rgba(244,67,54,.2)}.gravity-similarity[_ngcontent-%COMP%]   .red.red3[_ngcontent-%COMP%]{background-color:rgba(244,67,54,.3)}"]}),e})()}];let gi=(()=>{class e{}return e.\u0275mod=o.Lb({type:e}),e.\u0275inj=o.Kb({factory:function(t){return new(t||e)},imports:[[B.i.forChild(fi)],B.i]}),e})(),mi=(()=>{class e{}return e.\u0275mod=o.Lb({type:e}),e.\u0275inj=o.Kb({factory:function(t){return new(t||e)},imports:[[i.c,gi,D.forRoot({echarts:()=>r.e(4).then(r.t.bind(null,"MT78",7))}),k.a,q.a,z.q]]}),e})()}}]);