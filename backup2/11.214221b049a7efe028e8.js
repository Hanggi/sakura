(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"/WJA":function(e,t,r){"use strict";r.r(t),r.d(t,"TechnicalAnalysisModule",function(){return nn});var n={};r.r(n),r.d(n,"CandleData",function(){return j}),r.d(n,"CandleList",function(){return N}),r.d(n,"sma",function(){return Y}),r.d(n,"SMA",function(){return J}),r.d(n,"ema",function(){return $}),r.d(n,"EMA",function(){return Q}),r.d(n,"wma",function(){return te}),r.d(n,"WMA",function(){return ee}),r.d(n,"wema",function(){return ne}),r.d(n,"WEMA",function(){return re}),r.d(n,"macd",function(){return ie}),r.d(n,"MACD",function(){return se}),r.d(n,"rsi",function(){return ce}),r.d(n,"RSI",function(){return he}),r.d(n,"bollingerbands",function(){return fe}),r.d(n,"BollingerBands",function(){return pe}),r.d(n,"adx",function(){return _e}),r.d(n,"ADX",function(){return be}),r.d(n,"atr",function(){return Ee}),r.d(n,"ATR",function(){return Ie}),r.d(n,"truerange",function(){return ye}),r.d(n,"TrueRange",function(){return xe}),r.d(n,"roc",function(){return Se}),r.d(n,"ROC",function(){return Ce}),r.d(n,"kst",function(){return Pe}),r.d(n,"KST",function(){return Me}),r.d(n,"psar",function(){return Ve}),r.d(n,"PSAR",function(){return Ae}),r.d(n,"stochastic",function(){return Le}),r.d(n,"Stochastic",function(){return Oe}),r.d(n,"williamsr",function(){return qe}),r.d(n,"WilliamsR",function(){return ze}),r.d(n,"adl",function(){return ke}),r.d(n,"ADL",function(){return Te}),r.d(n,"obv",function(){return De}),r.d(n,"OBV",function(){return Re}),r.d(n,"trix",function(){return He}),r.d(n,"TRIX",function(){return Be}),r.d(n,"forceindex",function(){return je}),r.d(n,"ForceIndex",function(){return Fe}),r.d(n,"cci",function(){return Ge}),r.d(n,"CCI",function(){return Ne}),r.d(n,"awesomeoscillator",function(){return We}),r.d(n,"AwesomeOscillator",function(){return Ue}),r.d(n,"vwap",function(){return Ze}),r.d(n,"VWAP",function(){return Ke}),r.d(n,"volumeprofile",function(){return Je}),r.d(n,"VolumeProfile",function(){return Xe}),r.d(n,"mfi",function(){return $e}),r.d(n,"MFI",function(){return Qe}),r.d(n,"stochasticrsi",function(){return tt}),r.d(n,"StochasticRSI",function(){return et}),r.d(n,"averagegain",function(){return ae}),r.d(n,"AverageGain",function(){return oe}),r.d(n,"averageloss",function(){return le}),r.d(n,"AverageLoss",function(){return ue}),r.d(n,"sd",function(){return ve}),r.d(n,"SD",function(){return de}),r.d(n,"highest",function(){return nt}),r.d(n,"Highest",function(){return rt}),r.d(n,"lowest",function(){return it}),r.d(n,"Lowest",function(){return st}),r.d(n,"sum",function(){return at}),r.d(n,"Sum",function(){return ot}),r.d(n,"FixedSizeLinkedList",function(){return F}),r.d(n,"renko",function(){return lt}),r.d(n,"HeikinAshi",function(){return ht}),r.d(n,"heikinashi",function(){return ct}),r.d(n,"bullish",function(){return Xt}),r.d(n,"bearish",function(){return _r}),r.d(n,"abandonedbaby",function(){return Er}),r.d(n,"doji",function(){return _t}),r.d(n,"bearishengulfingpattern",function(){return Yt}),r.d(n,"bullishengulfingpattern",function(){return gt}),r.d(n,"darkcloudcover",function(){return Sr}),r.d(n,"downsidetasukigap",function(){return St}),r.d(n,"dragonflydoji",function(){return Pr}),r.d(n,"gravestonedoji",function(){return Vr}),r.d(n,"bullishharami",function(){return mt}),r.d(n,"bearishharami",function(){return $t}),r.d(n,"bullishharamicross",function(){return yt}),r.d(n,"bearishharamicross",function(){return tr}),r.d(n,"eveningdojistar",function(){return nr}),r.d(n,"eveningstar",function(){return ir}),r.d(n,"morningdojistar",function(){return Et}),r.d(n,"morningstar",function(){return pt}),r.d(n,"bullishmarubozu",function(){return Pt}),r.d(n,"bearishmarubozu",function(){return ar}),r.d(n,"piercingline",function(){return Vt}),r.d(n,"bullishspinningtop",function(){return Lr}),r.d(n,"bearishspinningtop",function(){return qr}),r.d(n,"threeblackcrows",function(){return lr}),r.d(n,"threewhitesoldiers",function(){return Lt}),r.d(n,"bullishhammerstick",function(){return qt}),r.d(n,"bearishhammerstick",function(){return Dt}),r.d(n,"bullishinvertedhammerstick",function(){return kt}),r.d(n,"bearishinvertedhammerstick",function(){return Ht}),r.d(n,"hammerpattern",function(){return jt}),r.d(n,"hammerpatternunconfirmed",function(){return Gt}),r.d(n,"hangingman",function(){return cr}),r.d(n,"hangingmanunconfirmed",function(){return vr}),r.d(n,"shootingstar",function(){return fr}),r.d(n,"shootingstarunconfirmed",function(){return wr}),r.d(n,"tweezertop",function(){return xr}),r.d(n,"tweezerbottom",function(){return Wt}),r.d(n,"fibonacciretracement",function(){return Tr}),r.d(n,"ichimokucloud",function(){return Rr}),r.d(n,"IchimokuCloud",function(){return kr}),r.d(n,"keltnerchannels",function(){return Fr}),r.d(n,"KeltnerChannels",function(){return Hr}),r.d(n,"KeltnerChannelsInput",function(){return Dr}),r.d(n,"KeltnerChannelsOutput",function(){return Br}),r.d(n,"chandelierexit",function(){return Ur}),r.d(n,"ChandelierExit",function(){return Gr}),r.d(n,"ChandelierExitInput",function(){return jr}),r.d(n,"ChandelierExitOutput",function(){return Nr}),r.d(n,"crossUp",function(){return Kr}),r.d(n,"CrossUp",function(){return Wr}),r.d(n,"crossDown",function(){return Xr}),r.d(n,"CrossDown",function(){return Zr}),r.d(n,"setConfig",function(){return U}),r.d(n,"getConfig",function(){return W});var s=r("ofXK");function i(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{u(n.next(e))}catch(t){i(t)}}function a(e){try{u(n.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}u((n=n.apply(e,t||[])).next())})}var o=r("fXoL"),a=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var r=-1;return e.some(function(e,n){return e[0]===t&&(r=n,!0)}),r}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var r=e(this.__entries__,t),n=this.__entries__[r];return n&&n[1]},t.prototype.set=function(t,r){var n=e(this.__entries__,t);~n?this.__entries__[n][1]=r:this.__entries__.push([t,r])},t.prototype.delete=function(t){var r=this.__entries__,n=e(r,t);~n&&r.splice(n,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var r=0,n=this.__entries__;r<n.length;r++){var s=n[r];e.call(t,s[1],s[0])}},t}()}(),u="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,l="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),h="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(l):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)},c=["top","right","bottom","left","width","height","size","weight"],d="undefined"!=typeof MutationObserver,v=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var r=!1,n=!1,s=0;function i(){r&&(r=!1,e()),n&&a()}function o(){h(i)}function a(){var e=Date.now();if(r){if(e-s<2)return;n=!0}else r=!0,n=!1,setTimeout(o,20);s=e}return a}(this.refresh.bind(this))}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,r=t.indexOf(e);~r&&t.splice(r,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return e.forEach(function(e){return e.broadcastActive()}),e.length>0},e.prototype.connect_=function(){u&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),d?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){u&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,r=void 0===t?"":t;c.some(function(e){return!!~r.indexOf(e)})&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),p=function(e,t){for(var r=0,n=Object.keys(t);r<n.length;r++){var s=n[r];Object.defineProperty(e,s,{value:t[s],enumerable:!1,writable:!1,configurable:!0})}return e},f=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||l},g=y(0,0,0,0);function w(e){return parseFloat(e)||0}function m(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.reduce(function(t,r){return t+w(e["border-"+r+"-width"])},0)}var x="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof f(e).SVGGraphicsElement}:function(e){return e instanceof f(e).SVGElement&&"function"==typeof e.getBBox};function y(e,t,r,n){return{x:e,y:t,width:r,height:n}}var b=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=y(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e,t=(e=this.target,u?x(e)?function(e){var t=e.getBBox();return y(0,0,t.width,t.height)}(e):function(e){var t=e.clientWidth,r=e.clientHeight;if(!t&&!r)return g;var n=f(e).getComputedStyle(e),s=function(e){for(var t={},r=0,n=["top","right","bottom","left"];r<n.length;r++){var s=n[r];t[s]=w(e["padding-"+s])}return t}(n),i=s.left+s.right,o=s.top+s.bottom,a=w(n.width),u=w(n.height);if("border-box"===n.boxSizing&&(Math.round(a+i)!==t&&(a-=m(n,"left","right")+i),Math.round(u+o)!==r&&(u-=m(n,"top","bottom")+o)),!function(e){return e===f(e).document.documentElement}(e)){var l=Math.round(a+i)-t,h=Math.round(u+o)-r;1!==Math.abs(l)&&(a-=l),1!==Math.abs(h)&&(u-=h)}return y(s.left,s.top,a,u)}(e):g);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),_=function(e,t){var r,n,s,i,o,a,u,l=(n=(r=t).x,s=r.y,i=r.width,o=r.height,a="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,u=Object.create(a.prototype),p(u,{x:n,y:s,width:i,height:o,top:s,right:n+i,bottom:o+s,left:n}),u);p(this,{target:e,contentRect:l})},I=function(){function e(e,t,r){if(this.activeObservations_=[],this.observations_=new a,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=r}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof f(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new b(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof f(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(e){return new _(e.target,e.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),E="undefined"!=typeof WeakMap?new WeakMap:new a,C=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=v.getInstance(),n=new I(t,r,this);E.set(this,n)};["observe","unobserve","disconnect"].forEach(function(e){C.prototype[e]=function(){var t;return(t=E.get(this))[e].apply(t,arguments)}});var S=void 0!==l.ResizeObserver?l.ResizeObserver:C,M=r("LRne"),P=r("EY2u"),A=r("HDdC"),V=r("eIep");class O{constructor(e){this.changes=e}static of(e){return new O(e)}notEmpty(e){if(this.changes[e]){const t=this.changes[e].currentValue;if(null!=t)return Object(M.a)(t)}return P.a}has(e){if(this.changes[e]){const t=this.changes[e].currentValue;return Object(M.a)(t)}return P.a}notFirst(e){if(this.changes[e]&&!this.changes[e].isFirstChange()){const t=this.changes[e].currentValue;return Object(M.a)(t)}return P.a}notFirstAndEmpty(e){if(this.changes[e]&&!this.changes[e].isFirstChange()){const t=this.changes[e].currentValue;if(null!=t)return Object(M.a)(t)}return P.a}}const L=new o.s("NGX_ECHARTS_CONFIG");let z=(()=>{let e=class{constructor(e,t,r){this.el=t,this.ngZone=r,this.autoResize=!0,this.loadingType="default",this.chartInit=new o.o,this.optionsError=new o.o,this.chartClick=this.createLazyEvent("click"),this.chartDblClick=this.createLazyEvent("dblclick"),this.chartMouseDown=this.createLazyEvent("mousedown"),this.chartMouseMove=this.createLazyEvent("mousemove"),this.chartMouseUp=this.createLazyEvent("mouseup"),this.chartMouseOver=this.createLazyEvent("mouseover"),this.chartMouseOut=this.createLazyEvent("mouseout"),this.chartGlobalOut=this.createLazyEvent("globalout"),this.chartContextMenu=this.createLazyEvent("contextmenu"),this.chartLegendSelectChanged=this.createLazyEvent("legendselectchanged"),this.chartLegendSelected=this.createLazyEvent("legendselected"),this.chartLegendUnselected=this.createLazyEvent("legendunselected"),this.chartLegendScroll=this.createLazyEvent("legendscroll"),this.chartDataZoom=this.createLazyEvent("datazoom"),this.chartDataRangeSelected=this.createLazyEvent("datarangeselected"),this.chartTimelineChanged=this.createLazyEvent("timelinechanged"),this.chartTimelinePlayChanged=this.createLazyEvent("timelineplaychanged"),this.chartRestore=this.createLazyEvent("restore"),this.chartDataViewChanged=this.createLazyEvent("dataviewchanged"),this.chartMagicTypeChanged=this.createLazyEvent("magictypechanged"),this.chartPieSelectChanged=this.createLazyEvent("pieselectchanged"),this.chartPieSelected=this.createLazyEvent("pieselected"),this.chartPieUnselected=this.createLazyEvent("pieunselected"),this.chartMapSelectChanged=this.createLazyEvent("mapselectchanged"),this.chartMapSelected=this.createLazyEvent("mapselected"),this.chartMapUnselected=this.createLazyEvent("mapunselected"),this.chartAxisAreaSelected=this.createLazyEvent("axisareaselected"),this.chartFocusNodeAdjacency=this.createLazyEvent("focusnodeadjacency"),this.chartUnfocusNodeAdjacency=this.createLazyEvent("unfocusnodeadjacency"),this.chartBrush=this.createLazyEvent("brush"),this.chartBrushEnd=this.createLazyEvent("brushend"),this.chartBrushSelected=this.createLazyEvent("brushselected"),this.chartRendered=this.createLazyEvent("rendered"),this.chartFinished=this.createLazyEvent("finished"),this.echarts=e.echarts}ngOnChanges(e){const t=O.of(e);t.notFirstAndEmpty("options").subscribe(e=>this.onOptionsChange(e)),t.notFirstAndEmpty("merge").subscribe(e=>this.setOption(e)),t.has("loading").subscribe(e=>this.toggleLoading(!!e)),t.notFirst("theme").subscribe(()=>this.refreshChart())}ngOnInit(){this.autoResize&&(this.resizeSub=new S(()=>this.resize()),this.resizeSub.observe(this.el.nativeElement))}ngOnDestroy(){this.resizeSub&&this.resizeSub.unobserve(this.el.nativeElement),this.dispose()}ngAfterViewInit(){setTimeout(()=>this.initChart())}dispose(){this.chart&&(this.chart.dispose(),this.chart=null)}resize(){this.chart&&this.chart.resize()}toggleLoading(e){this.chart&&(e?this.chart.showLoading(this.loadingType,this.loadingOpts):this.chart.hideLoading())}setOption(e,t){if(this.chart)try{this.chart.setOption(e,t)}catch(r){console.error(r),this.optionsError.emit(r)}}refreshChart(){return i(this,void 0,void 0,function*(){this.dispose(),yield this.initChart()})}createChart(){const e=this.el.nativeElement;if(window&&window.getComputedStyle){const t=window.getComputedStyle(e,null).getPropertyValue("height");t&&"0px"!==t||e.style.height&&"0px"!==e.style.height||(e.style.height="400px")}return this.ngZone.runOutsideAngular(()=>("function"==typeof this.echarts?this.echarts:()=>Promise.resolve(this.echarts))().then(({init:t})=>t(e,this.theme,this.initOpts)))}initChart(){return i(this,void 0,void 0,function*(){yield this.onOptionsChange(this.options),this.merge&&this.chart&&this.setOption(this.merge)})}onOptionsChange(e){return i(this,void 0,void 0,function*(){e&&(this.chart||(this.chart=yield this.createChart(),this.chartInit.emit(this.chart)),this.setOption(this.options,!0))})}createLazyEvent(e){return this.chartInit.pipe(Object(V.a)(t=>new A.a(r=>(t.on(e,e=>this.ngZone.run(()=>r.next(e))),()=>t.off(e)))))}};var t;return e.\u0275fac=function(t){return new(t||e)(o.Mb(L),o.Mb(o.l),o.Mb(o.B))},e.\u0275dir=o.Hb({type:e,selectors:[["echarts"],["","echarts",""]],inputs:{autoResize:"autoResize",loadingType:"loadingType",options:"options",theme:"theme",loading:"loading",initOpts:"initOpts",merge:"merge",loadingOpts:"loadingOpts"},outputs:{chartInit:"chartInit",optionsError:"optionsError",chartClick:"chartClick",chartDblClick:"chartDblClick",chartMouseDown:"chartMouseDown",chartMouseMove:"chartMouseMove",chartMouseUp:"chartMouseUp",chartMouseOver:"chartMouseOver",chartMouseOut:"chartMouseOut",chartGlobalOut:"chartGlobalOut",chartContextMenu:"chartContextMenu",chartLegendSelectChanged:"chartLegendSelectChanged",chartLegendSelected:"chartLegendSelected",chartLegendUnselected:"chartLegendUnselected",chartLegendScroll:"chartLegendScroll",chartDataZoom:"chartDataZoom",chartDataRangeSelected:"chartDataRangeSelected",chartTimelineChanged:"chartTimelineChanged",chartTimelinePlayChanged:"chartTimelinePlayChanged",chartRestore:"chartRestore",chartDataViewChanged:"chartDataViewChanged",chartMagicTypeChanged:"chartMagicTypeChanged",chartPieSelectChanged:"chartPieSelectChanged",chartPieSelected:"chartPieSelected",chartPieUnselected:"chartPieUnselected",chartMapSelectChanged:"chartMapSelectChanged",chartMapSelected:"chartMapSelected",chartMapUnselected:"chartMapUnselected",chartAxisAreaSelected:"chartAxisAreaSelected",chartFocusNodeAdjacency:"chartFocusNodeAdjacency",chartUnfocusNodeAdjacency:"chartUnfocusNodeAdjacency",chartBrush:"chartBrush",chartBrushEnd:"chartBrushEnd",chartBrushSelected:"chartBrushSelected",chartRendered:"chartRendered",chartFinished:"chartFinished"},exportAs:["echarts"],features:[o.zb]}),e=function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o}([(t=Object(o.q)(L),function(e,r){t(e,r,0)})],e),e})();var q;let T=(()=>{let e=q=class{static forRoot(e){return{ngModule:q,providers:[{provide:L,useValue:e}]}}static forChild(){return{ngModule:q}}};return e.\u0275mod=o.Kb({type:e}),e.\u0275inj=o.Jb({factory:function(t){return new(t||e)},imports:[[]]}),e})();var k=r("tyNb"),R=r("Txg/");let D=(()=>{class e{constructor(){}calculateMA(e,t){const r=[];for(let n=0,s=t.length;n<s;n++){if(n<e){r.push("-");continue}let s=0;for(let r=0;r<e;r++)s+=t[n-r][1];r.push(+(s/e).toFixed(3))}return r}gravity(e,t=1){const r=[],n=this.calculateMA(30,e),s=this.calculateMA(72,e);for(let i=0,o=e.length;i<o;i++)r.push(i<72?"-":((n[i]+s[i])/2*t).toFixed(3));return r}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class B{constructor(e,t,r){this.next=r,r&&(r.prev=this),this.prev=t,t&&(t.next=this),this.data=e}}class H{constructor(){this._length=0}get head(){return this._head&&this._head.data}get tail(){return this._tail&&this._tail.data}get current(){return this._current&&this._current.data}get length(){return this._length}push(e){this._tail=new B(e,this._tail),0===this._length&&(this._head=this._tail,this._current=this._head,this._next=this._head),this._length++}pop(){var e=this._tail;if(0!==this._length)return this._length--,0===this._length?(this._head=this._tail=this._current=this._next=void 0,e.data):(this._tail=e.prev,this._tail.next=void 0,this._current===e&&(this._current=this._tail,this._next=void 0),e.data)}shift(){var e=this._head;if(0!==this._length)return this._length--,0===this._length?(this._head=this._tail=this._current=this._next=void 0,e.data):(this._head=this._head.next,this._current===e&&(this._current=this._head,this._next=this._current.next),e.data)}unshift(e){this._head=new B(e,void 0,this._head),0===this._length&&(this._tail=this._head,this._next=this._head),this._length++}unshiftCurrent(){var e=this._current;return e===this._head||this._length<2?e&&e.data:(e===this._tail?(this._tail=e.prev,this._tail.next=void 0,this._current=this._tail):(e.next.prev=e.prev,e.prev.next=e.next,this._current=e.prev),this._next=this._current.next,e.next=this._head,e.prev=void 0,this._head.prev=e,this._head=e,e.data)}removeCurrent(){var e=this._current;if(0!==this._length)return this._length--,0===this._length?(this._head=this._tail=this._current=this._next=void 0,e.data):(e===this._tail?(this._tail=e.prev,this._tail.next=void 0,this._current=this._tail):e===this._head?(this._head=e.next,this._head.prev=void 0,this._current=this._head):(e.next.prev=e.prev,e.prev.next=e.next,this._current=e.prev),this._next=this._current.next,e.data)}resetCursor(){return this._current=this._next=this._head,this}next(){var e=this._next;if(void 0!==e)return this._next=e.next,this._current=e,e.data}}class F extends H{constructor(e,t,r,n){if(super(),this.size=e,this.maintainHigh=t,this.maintainLow=r,this.maintainSum=n,this.totalPushed=0,this.periodHigh=0,this.periodLow=1/0,this.periodSum=0,!e||"number"!=typeof e)throw"Size required and should be a number.";this._push=this.push,this.push=function(e){this.add(e),this.totalPushed++}}add(e){this.length===this.size?(this.lastShift=this.shift(),this._push(e),this.maintainHigh&&this.lastShift==this.periodHigh&&this.calculatePeriodHigh(),this.maintainLow&&this.lastShift==this.periodLow&&this.calculatePeriodLow(),this.maintainSum&&(this.periodSum=this.periodSum-this.lastShift)):this._push(e),this.maintainHigh&&this.periodHigh<=e&&(this.periodHigh=e),this.maintainLow&&this.periodLow>=e&&(this.periodLow=e),this.maintainSum&&(this.periodSum=this.periodSum+e)}*iterator(){for(this.resetCursor();this.next();)yield this.current}calculatePeriodHigh(){for(this.resetCursor(),this.next()&&(this.periodHigh=this.current);this.next();)this.periodHigh<=this.current&&(this.periodHigh=this.current)}calculatePeriodLow(){for(this.resetCursor(),this.next()&&(this.periodLow=this.current);this.next();)this.periodLow>=this.current&&(this.periodLow=this.current)}}class j{}class N{constructor(){this.open=[],this.high=[],this.low=[],this.close=[],this.volume=[],this.timestamp=[]}}let G={};function U(e,t){G[e]=t}function W(e){return G[e]}function K(e){let t=W("precision");return t?parseFloat(e.toPrecision(t)):e}class Z{}class X{constructor(e){this.format=e.format||K}static reverseInputs(e){e.reversedInput&&(e.values&&e.values.reverse(),e.open&&e.open.reverse(),e.high&&e.high.reverse(),e.low&&e.low.reverse(),e.close&&e.close.reverse(),e.volume&&e.volume.reverse(),e.timestamp&&e.timestamp.reverse())}getResult(){return this.result}}class J extends X{constructor(e){super(e),this.period=e.period,this.price=e.values,this.generator=function*(e){var t,r=new H,n=0,s=1,i=yield;for(r.push(0);;)s<e?(s++,r.push(i),n+=i):(t=(n=n-r.shift()+i)/e,r.push(i)),i=yield t}(this.period),this.generator.next(),this.result=[],this.price.forEach(e=>{var t=this.generator.next(e);void 0!==t.value&&this.result.push(this.format(t.value))})}nextValue(e){var t=this.generator.next(e).value;if(null!=t)return this.format(t)}}function Y(e){X.reverseInputs(e);var t=new J(e).result;return e.reversedInput&&t.reverse(),X.reverseInputs(e),t}J.calculate=Y;class Q extends X{constructor(e){super(e);var t,r=e.period,n=e.values,s=2/(r+1);this.result=[],t=new J({period:r,values:[]}),this.generator=function*(){for(var e,r=yield;;)void 0!==e&&void 0!==r?(e=(r-e)*s+e,r=yield e):(r=yield,(e=t.nextValue(r))&&(r=yield e))}(),this.generator.next(),this.generator.next(),n.forEach(e=>{var t=this.generator.next(e);null!=t.value&&this.result.push(this.format(t.value))})}nextValue(e){var t=this.generator.next(e).value;if(null!=t)return this.format(t)}}function $(e){X.reverseInputs(e);var t=new Q(e).result;return e.reversedInput&&t.reverse(),X.reverseInputs(e),t}Q.calculate=$;class ee extends X{constructor(e){super(e);var t=e.period,r=e.values;this.result=[],this.generator=function*(){let e=new H,r=t*(t+1)/2;for(;;)if(e.length<t)e.push(yield);else{e.resetCursor();let s=0;for(let n=1;n<=t;n++)s+=e.next()*n/r;var n=yield s;e.shift(),e.push(n)}}(),this.generator.next(),r.forEach((e,t)=>{var r=this.generator.next(e);null!=r.value&&this.result.push(this.format(r.value))})}nextValue(e){var t=this.generator.next(e).value;if(null!=t)return this.format(t)}}function te(e){X.reverseInputs(e);var t=new ee(e).result;return e.reversedInput&&t.reverse(),X.reverseInputs(e),t}ee.calculate=te;class re extends X{constructor(e){super(e);var t,r=e.period,n=e.values,s=1/r;this.result=[],t=new J({period:r,values:[]}),this.generator=function*(){for(var e,r=yield;;)void 0!==e&&void 0!==r?(e=(r-e)*s+e,r=yield e):(r=yield,void 0!==(e=t.nextValue(r))&&(r=yield e))}(),this.generator.next(),this.generator.next(),n.forEach(e=>{var t=this.generator.next(e);null!=t.value&&this.result.push(this.format(t.value))})}nextValue(e){var t=this.generator.next(e).value;if(null!=t)return this.format(t)}}function ne(e){X.reverseInputs(e);var t=new re(e).result;return e.reversedInput&&t.reverse(),X.reverseInputs(e),t}re.calculate=ne;class se extends X{constructor(e){super(e);var t=e.SimpleMAOscillator?J:Q,r=e.SimpleMASignal?J:Q,n=new t({period:e.fastPeriod,values:[],format:e=>e}),s=new t({period:e.slowPeriod,values:[],format:e=>e}),i=new r({period:e.signalPeriod,values:[],format:e=>e}),o=this.format;this.result=[],this.generator=function*(){for(var t,r,a,u,l,h,c=0;;)c<e.slowPeriod?(t=yield,l=n.nextValue(t),h=s.nextValue(t),c++):(l&&h&&(a=i.nextValue(r=l-h)),u=r-a,t=yield{MACD:o(r),signal:a?o(a):void 0,histogram:isNaN(u)?void 0:o(u)},l=n.nextValue(t),h=s.nextValue(t))}(),this.generator.next(),e.values.forEach(e=>{var t=this.generator.next(e);null!=t.value&&this.result.push(t.value)})}nextValue(e){return this.generator.next(e).value}}function ie(e){X.reverseInputs(e);var t=new se(e).result;return e.reversedInput&&t.reverse(),X.reverseInputs(e),t}se.calculate=ie;class oe extends X{constructor(e){super(e);let t=e.values,r=this.format;this.generator=function*(e){var t,n,s=yield,i=1,o=0,a=s;for(s=yield;;)(n=(n=s-a)>0?n:0)>0&&(o+=n),i<e?i++:t=void 0===t?o/e:(t*(e-1)+n)/e,a=s,t=void 0!==t?r(t):void 0,s=yield t}(e.period),this.generator.next(),this.result=[],t.forEach(e=>{var t=this.generator.next(e);void 0!==t.value&&this.result.push(t.value)})}nextValue(e){return this.generator.next(e).value}}function ae(e){X.reverseInputs(e);var t=new oe(e).result;return e.reversedInput&&t.reverse(),X.reverseInputs(e),t}oe.calculate=ae;class ue extends X{constructor(e){super(e);let t=e.values,r=this.format;this.generator=function*(e){var t,n,s=yield,i=1,o=0,a=s;for(s=yield;;)(n=(n=a-s)>0?n:0)>0&&(o+=n),i<e?i++:t=void 0===t?o/e:(t*(e-1)+n)/e,a=s,t=void 0!==t?r(t):void 0,s=yield t}(e.period),this.generator.next(),this.result=[],t.forEach(e=>{var t=this.generator.next(e);void 0!==t.value&&this.result.push(t.value)})}nextValue(e){return this.generator.next(e).value}}function le(e){X.reverseInputs(e);var t=new ue(e).result;return e.reversedInput&&t.reverse(),X.reverseInputs(e),t}ue.calculate=le;class he extends X{constructor(e){super(e);var t=e.period,r=e.values,n=new oe({period:t,values:[]}),s=new ue({period:t,values:[]});this.generator=function*(e){for(var t,r,i,o,a=yield;;)t=n.nextValue(a),r=s.nextValue(a),void 0!==t&&void 0!==r&&(0===r?o=100:0===t?o=0:(i=t/r,i=isNaN(i)?0:i,o=parseFloat((100-100/(1+i)).toFixed(2)))),a=yield o}(),this.generator.next(),this.result=[],r.forEach(e=>{var t=this.generator.next(e);void 0!==t.value&&this.result.push(t.value)})}nextValue(e){return this.generator.next(e).value}}function ce(e){X.reverseInputs(e);var t=new he(e).result;return e.reversedInput&&t.reverse(),X.reverseInputs(e),t}he.calculate=ce;class de extends X{constructor(e){super(e);var t=e.period,r=e.values,n=new J({period:t,values:[],format:e=>e});this.result=[],this.generator=function*(){var e,r,s,i=new F(t);for(e=yield;;){if(i.push(e),r=n.nextValue(e)){let e=0;for(let t of i.iterator())e+=Math.pow(t-r,2);s=Math.sqrt(e/t)}e=yield s}}(),this.generator.next(),r.forEach(e=>{var t=this.generator.next(e);null!=t.value&&this.result.push(this.format(t.value))})}nextValue(e){var t=this.generator.next(e);if(null!=t.value)return this.format(t.value)}}function ve(e){X.reverseInputs(e);var t=new de(e).result;return e.reversedInput&&t.reverse(),X.reverseInputs(e),t}de.calculate=ve;class pe extends X{constructor(e){super(e);var t,r,n=e.period,s=e.values,i=e.stdDev,o=this.format;this.result=[],t=new J({period:n,values:[],format:e=>e}),r=new de({period:n,values:[],format:e=>e}),this.generator=function*(){var e,n,s,a;for(n=yield;;){if(s=t.nextValue(n),a=r.nextValue(n),s){let t=o(s),r=o(s+a*i),u=o(s-a*i);e={middle:t,upper:r,lower:u,pb:o((n-u)/(r-u))}}n=yield e}}(),this.generator.next(),s.forEach(e=>{var t=this.generator.next(e);null!=t.value&&this.result.push(t.value)})}nextValue(e){return this.generator.next(e).value}}function fe(e){X.reverseInputs(e);var t=new pe(e).result;return e.reversedInput&&t.reverse(),X.reverseInputs(e),t}pe.calculate=fe;class ge extends X{constructor(e){super(e),this.period=e.period,this.price=e.values,this.generator=function*(e){new H;for(var t=0,r=1,n=yield,s=0;;)r<e?(r++,t+=n,s=void 0):r==e?(r++,s=t+=n):s=s-s/e+n,n=yield s}(this.period),this.generator.next(),this.result=[],this.price.forEach(e=>{var t=this.generator.next(e);null!=t.value&&this.result.push(this.format(t.value))})}nextValue(e){var t=this.generator.next(e).value;if(null!=t)return this.format(t)}}ge.calculate=function(e){X.reverseInputs(e);var t=new ge(e).result;return e.reversedInput&&t.reverse(),X.reverseInputs(e),t};class we extends X{constructor(e){super(e);var t=e.low,r=e.high,n=this.format;if(t.length!=r.length)throw"Inputs(low,high) not of equal size";this.result=[],this.generator=function*(){for(var e,t,r=yield;;){if(t){let s=t.low-r.low;e=n(s>r.high-t.high&&s>0?s:0)}t=r,r=yield e}}(),this.generator.next(),t.forEach((e,n)=>{var s=this.generator.next({high:r[n],low:t[n]});void 0!==s.value&&this.result.push(s.value)})}static calculate(e){X.reverseInputs(e);var t=new we(e).result;return e.reversedInput&&t.reverse(),X.reverseInputs(e),t}nextValue(e){return this.generator.next(e).value}}class me extends X{constructor(e){super(e);var t=e.low,r=e.high,n=this.format;if(t.length!=r.length)throw"Inputs(low,high) not of equal size";this.result=[],this.generator=function*(){for(var e,t,r=yield;;){if(t){let s=r.high-t.high;e=n(s>t.low-r.low&&s>0?s:0)}t=r,r=yield e}}(),this.generator.next(),t.forEach((e,n)=>{var s=this.generator.next({high:r[n],low:t[n]});void 0!==s.value&&this.result.push(s.value)})}static calculate(e){X.reverseInputs(e);var t=new me(e).result;return e.reversedInput&&t.reverse(),X.reverseInputs(e),t}nextValue(e){return this.generator.next(e).value}}class xe extends X{constructor(e){super(e);var t=e.low,r=e.high,n=e.close,s=this.format;if(t.length!=r.length)throw"Inputs(low,high) not of equal size";this.result=[],this.generator=function*(){for(var e,t,r=yield;;)void 0===e&&(e=r.close,r=yield t),t=Math.max(r.high-r.low,isNaN(Math.abs(r.high-e))?0:Math.abs(r.high-e),isNaN(Math.abs(r.low-e))?0:Math.abs(r.low-e)),e=r.close,null!=t&&(t=s(t)),r=yield t}(),this.generator.next(),t.forEach((e,s)=>{var i=this.generator.next({high:r[s],low:t[s],close:n[s]});null!=i.value&&this.result.push(i.value)})}nextValue(e){return this.generator.next(e).value}}function ye(e){X.reverseInputs(e);var t=new xe(e).result;return e.reversedInput&&t.reverse(),X.reverseInputs(e),t}xe.calculate=ye;class be extends X{constructor(e){super(e);var t=e.low,r=e.high,n=e.close,s=e.period,i=this.format,o=new me({high:[],low:[]}),a=new we({high:[],low:[]}),u=new ge({period:s,values:[],format:e=>e}),l=new ge({period:s,values:[],format:e=>e}),h=new ge({period:s,values:[],format:e=>e}),c=new re({period:s,values:[],format:e=>e}),d=new xe({low:[],high:[],close:[]});if(t.length!==r.length||r.length!==n.length)throw"Inputs(low,high, close) not of equal size";this.result=[],this.generator=function*(){for(var e,t,r,n=yield;;){let s=d.nextValue(n),i=o.nextValue(n),v=a.nextValue(n);if(void 0===s){n=yield;continue}let p=h.nextValue(s),f=u.nextValue(i),g=l.nextValue(v);if(null!=p&&null!=f&&null!=g){e=100*f/p,t=100*g/p;let n=Math.abs(e-t);r=c.nextValue(n/(e+t)*100)}n=yield{adx:r,pdi:e,mdi:t}}}(),this.generator.next(),t.forEach((e,s)=>{var o=this.generator.next({high:r[s],low:t[s],close:n[s]});null!=o.value&&null!=o.value.adx&&this.result.push({adx:i(o.value.adx),pdi:i(o.value.pdi),mdi:i(o.value.mdi)})})}nextValue(e){let t=this.generator.next(e).value;if(null!=t&&null!=t.adx)return{adx:this.format(t.adx),pdi:this.format(t.pdi),mdi:this.format(t.mdi)}}}function _e(e){X.reverseInputs(e);var t=new be(e).result;return e.reversedInput&&t.reverse(),X.reverseInputs(e),t}be.calculate=_e;class Ie extends X{constructor(e){super(e);var t=e.low,r=e.high,n=e.close,s=e.period,i=this.format;if(t.length!==r.length||r.length!==n.length)throw"Inputs(low,high, close) not of equal size";var o=new xe({low:[],high:[],close:[]}),a=new re({period:s,values:[],format:e=>e});this.result=[],this.generator=function*(){for(var e,t,r=yield;;)e=void 0===(t=o.nextValue({low:r.low,high:r.high,close:r.close}))?void 0:a.nextValue(t),r=yield e}(),this.generator.next(),t.forEach((e,s)=>{var o=this.generator.next({high:r[s],low:t[s],close:n[s]});void 0!==o.value&&this.result.push(i(o.value))})}nextValue(e){return this.generator.next(e).value}}function Ee(e){X.reverseInputs(e);var t=new Ie(e).result;return e.reversedInput&&t.reverse(),X.reverseInputs(e),t}Ie.calculate=Ee;class Ce extends X{constructor(e){super(e);var t=e.period,r=e.values;this.result=[],this.generator=function*(){let e=1;for(var r,n=new F(t),s=yield;;)n.push(s),e<t?e++:r=(s-n.lastShift)/n.lastShift*100,s=yield r}(),this.generator.next(),r.forEach(e=>{var t=this.generator.next(e);null==t.value||isNaN(t.value)||this.result.push(this.format(t.value))})}nextValue(e){var t=this.generator.next(e);if(null!=t.value&&!isNaN(t.value))return this.format(t.value)}}function Se(e){X.reverseInputs(e);var t=new Ce(e).result;return e.reversedInput&&t.reverse(),X.reverseInputs(e),t}Ce.calculate=Se;class Me extends X{constructor(e){super(e);let t=e.values,r=e.ROCPer1,n=e.ROCPer2,s=e.ROCPer3,i=e.ROCPer4,o=e.SMAROCPer1,a=e.SMAROCPer2,u=e.SMAROCPer3,l=e.SMAROCPer4,h=e.signalPeriod,c=new Ce({period:r,values:[]}),d=new Ce({period:n,values:[]}),v=new Ce({period:s,values:[]}),p=new Ce({period:i,values:[]}),f=new J({period:o,values:[],format:e=>e}),g=new J({period:a,values:[],format:e=>e}),w=new J({period:u,values:[],format:e=>e}),m=new J({period:l,values:[],format:e=>e}),x=new J({period:h,values:[],format:e=>e});var y=this.format;this.result=[];let b=Math.max(r+o,n+a,s+u,i+l);this.generator=function*(){let e,t,r,n,s,i,o,a=1,u=yield;for(;;){let l=c.nextValue(u),h=d.nextValue(u),_=v.nextValue(u),I=p.nextValue(u);t=void 0!==l?f.nextValue(l):void 0,r=void 0!==h?g.nextValue(h):void 0,n=void 0!==_?w.nextValue(_):void 0,s=void 0!==I?m.nextValue(I):void 0,a<b?a++:e=1*t+2*r+3*n+4*s,i=void 0!==e?x.nextValue(e):void 0,o=void 0!==e?{kst:y(e),signal:i?y(i):void 0}:void 0,u=yield o}}(),this.generator.next(),t.forEach(e=>{let t=this.generator.next(e);null!=t.value&&this.result.push(t.value)})}nextValue(e){let t=this.generator.next(e);if(null!=t.value)return t.value}}function Pe(e){X.reverseInputs(e);var t=new Me(e).result;return e.reversedInput&&t.reverse(),X.reverseInputs(e),t}Me.calculate=Pe;class Ae extends X{constructor(e){super(e);let t=e.high||[],r=e.low||[];this.result=[],this.generator=function*(e,t){let r,n,s,i,o=!0,a=e,u=yield;for(;;)r?(s+=a*(n-s),o?(s=Math.min(s,i.low,u.low),r.high>n&&(n=r.high,a=Math.min(a+e,t))):(s=Math.max(s,i.high,u.high),r.low<n&&(n=r.low,a=Math.min(a+e,t))),(o&&r.low<s||!o&&r.high>s)&&(a=e,s=n,o=!o,n=o?r.high:r.low)):(s=u.low,n=u.high),i=u,r&&(u=r),r=yield s}(e.step,e.max),this.generator.next(),r.forEach((e,n)=>{var s=this.generator.next({high:t[n],low:r[n]});void 0!==s.value&&this.result.push(s.value)})}nextValue(e){let t=this.generator.next(e);if(void 0!==t.value)return t.value}}function Ve(e){X.reverseInputs(e);var t=new Ae(e).result;return e.reversedInput&&t.reverse(),X.reverseInputs(e),t}Ae.calculate=Ve;class Oe extends X{constructor(e){super(e);let t=e.low,r=e.high,n=e.close,s=e.period,i=e.signalPeriod,o=this.format;if(t.length!==r.length||r.length!==n.length)throw"Inputs(low,high, close) not of equal size";this.result=[],this.generator=function*(){let e,t,r=1,n=new F(s,!0,!1),a=new F(s,!1,!0),u=new J({period:i,values:[],format:e=>e});for(var l=yield;;){if(n.push(l.high),a.push(l.low),r<s){r++,l=yield;continue}let i=a.periodLow;e=(l.close-i)/(n.periodHigh-i)*100,e=isNaN(e)?0:e,t=u.nextValue(e),l=yield{k:o(e),d:void 0!==t?o(t):void 0}}}(),this.generator.next(),t.forEach((e,s)=>{var i=this.generator.next({high:r[s],low:t[s],close:n[s]});void 0!==i.value&&this.result.push(i.value)})}nextValue(e){let t=this.generator.next(e);if(void 0!==t.value)return t.value}}function Le(e){X.reverseInputs(e);var t=new Oe(e).result;return e.reversedInput&&t.reverse(),X.reverseInputs(e),t}Oe.calculate=Le;class ze extends X{constructor(e){super(e);let t=e.low,r=e.high,n=e.close,s=e.period,i=this.format;if(t.length!==r.length||r.length!==n.length)throw"Inputs(low,high, close) not of equal size";this.result=[],this.generator=function*(){let e,t,r=1,n=new F(s,!0,!1),o=new F(s,!1,!0);var a=yield;let u;for(;;)n.push(a.high),o.push(a.low),r<s?(r++,a=yield):(e=o.periodLow,t=n.periodHigh,u=i((t-a.close)/(t-e)*-100),a=yield u)}(),this.generator.next(),t.forEach((e,s)=>{var i=this.generator.next({high:r[s],low:t[s],close:n[s]});void 0!==i.value&&this.result.push(i.value)})}nextValue(e){var t=this.generator.next(e);if(null!=t.value)return this.format(t.value)}}function qe(e){X.reverseInputs(e);var t=new ze(e).result;return e.reversedInput&&t.reverse(),X.reverseInputs(e),t}ze.calculate=qe;class Te extends X{constructor(e){super(e);var t=e.high,r=e.low,n=e.close,s=e.volume;if(r.length!==t.length||t.length!==n.length||t.length!==s.length)throw"Inputs(low,high, close, volumes) not of equal size";this.result=[],this.generator=function*(){var e,t=0;for(e=yield;;){let r=(e.close-e.low-(e.high-e.close))/(e.high-e.low);r=isNaN(r)?1:r,t+=r*e.volume,e=yield Math.round(t)}}(),this.generator.next(),t.forEach((e,t)=>{var i=this.generator.next({high:e,low:r[t],close:n[t],volume:s[t]});null!=i.value&&this.result.push(i.value)})}nextValue(e){return this.generator.next(e).value}}function ke(e){X.reverseInputs(e);var t=new Te(e).result;return e.reversedInput&&t.reverse(),X.reverseInputs(e),t}Te.calculate=ke;class Re extends X{constructor(e){super(e);var t=e.close,r=e.volume;this.result=[],this.generator=function*(){var e,t,r=0;for((e=yield).close&&"number"==typeof e.close&&(t=e.close,e=yield);;)t<e.close?r+=e.volume:e.close<t&&(r-=e.volume),t=e.close,e=yield r}(),this.generator.next(),t.forEach((e,n)=>{let s=this.generator.next({close:t[n],volume:r[n]});null!=s.value&&this.result.push(s.value)})}nextValue(e){return this.generator.next(e).value}}function De(e){X.reverseInputs(e);var t=new Re(e).result;return e.reversedInput&&t.reverse(),X.reverseInputs(e),t}Re.calculate=De;class Be extends X{constructor(e){super(e);let t=e.values,r=e.period,n=this.format,s=new Q({period:r,values:[],format:e=>e}),i=new Q({period:r,values:[],format:e=>e}),o=new Q({period:r,values:[],format:e=>e}),a=new Ce({period:1,values:[],format:e=>e});this.result=[],this.generator=function*(){let e=yield;for(;;){let t=s.nextValue(e),r=t?i.nextValue(t):void 0,u=r?o.nextValue(r):void 0,l=u?a.nextValue(u):void 0;e=yield l?n(l):void 0}}(),this.generator.next(),t.forEach(e=>{let t=this.generator.next(e);void 0!==t.value&&this.result.push(t.value)})}nextValue(e){let t=this.generator.next(e);if(void 0!==t.value)return t.value}}function He(e){X.reverseInputs(e);var t=new Be(e).result;return e.reversedInput&&t.reverse(),X.reverseInputs(e),t}Be.calculate=He;class Fe extends X{constructor(e){super(e);var t=e.close,r=e.volume;if(r.length!==t.length)throw"Inputs(volume, close) not of equal size";let n=new Q({values:[],period:e.period||1});this.result=[],this.generator=function*(){var e=yield,t=yield;let r;for(;;)r=(t.close-e.close)*t.volume,e=t,t=yield n.nextValue(r)}(),this.generator.next(),r.forEach((e,n)=>{var s=this.generator.next({close:t[n],volume:r[n]});null!=s.value&&this.result.push(s.value)})}nextValue(e){let t=this.generator.next(e).value;if(null!=t)return t}}function je(e){X.reverseInputs(e);var t=new Fe(e).result;return e.reversedInput&&t.reverse(),X.reverseInputs(e),t}Fe.calculate=je;class Ne extends X{constructor(e){super(e);var t=e.low,r=e.high,n=e.close,s=e.period,i=new F(s),o=new J({period:s,values:[],format:e=>e});if(t.length!==r.length||r.length!==n.length)throw"Inputs(low,high, close) not of equal size";this.result=[],this.generator=function*(){for(var e=yield;;){let t=(e.high+e.low+e.close)/3;i.push(t);let r,n=o.nextValue(t),a=null,u=0;if(null!=n){for(let e of i.iterator())u+=Math.abs(e-n);a=u/s,r=(t-n)/(.015*a)}e=yield r}}(),this.generator.next(),t.forEach((e,s)=>{var i=this.generator.next({high:r[s],low:t[s],close:n[s]});null!=i.value&&this.result.push(i.value)})}nextValue(e){let t=this.generator.next(e).value;if(null!=t)return t}}function Ge(e){X.reverseInputs(e);var t=new Ne(e).result;return e.reversedInput&&t.reverse(),X.reverseInputs(e),t}Ne.calculate=Ge;class Ue extends X{constructor(e){super(e);var t=e.high,r=e.low,n=e.fastPeriod,s=new J({values:[],period:e.slowPeriod}),i=new J({values:[],period:n});this.result=[],this.generator=function*(){var e,t,r,n,o;for(t=yield;;)n=s.nextValue(r=(t.high+t.low)/2),o=i.nextValue(r),void 0!==n&&void 0!==o&&(e=o-n),t=yield e}(),this.generator.next(),t.forEach((e,t)=>{var n=this.generator.next({high:e,low:r[t]});null!=n.value&&this.result.push(this.format(n.value))})}nextValue(e){var t=this.generator.next(e);if(null!=t.value)return this.format(t.value)}}function We(e){X.reverseInputs(e);var t=new Ue(e).result;return e.reversedInput&&t.reverse(),X.reverseInputs(e),t}Ue.calculate=We;class Ke extends X{constructor(e){super(e);var t=e.low,r=e.high,n=e.close,s=e.volume;if(t.length!==r.length||r.length!==n.length)throw"Inputs(low,high, close) not of equal size";this.result=[],this.generator=function*(){var e=yield;let t=0,r=0;for(;;)t+=e.volume*((e.high+e.low+e.close)/3),r+=e.volume,e=yield t/r}(),this.generator.next(),t.forEach((e,i)=>{var o=this.generator.next({high:r[i],low:t[i],close:n[i],volume:s[i]});null!=o.value&&this.result.push(o.value)})}nextValue(e){let t=this.generator.next(e).value;if(null!=t)return t}}function Ze(e){X.reverseInputs(e);var t=new Ke(e).result;return e.reversedInput&&t.reverse(),X.reverseInputs(e),t}Ke.calculate=Ze;class Xe extends X{constructor(e){super(e);var t=e.high,r=e.low,n=e.close,s=e.open,i=e.volume,o=e.noOfBars;if(r.length!==t.length||t.length!==n.length||t.length!==i.length)throw"Inputs(low,high, close, volumes) not of equal size";this.result=[];var a,u,l=Math.max(...t,...r,...n,...s),h=Math.min(...t,...r,...n,...s),c=(l-h)/o,d=h;for(let v=0;v<o;v++){let e=d,o=e+c;d=o;let l=0,h=0,v=0;for(let c=0;c<t.length;c++){let d=s[c],p=n[c],f=i[c];((a=e)<=(u=r[c])&&o>=u||u<=a&&t[c]>=a)&&(v+=f,d>p?h+=f:l+=f)}this.result.push({rangeStart:e,rangeEnd:o,bullishVolume:l,bearishVolume:h,totalVolume:v})}}nextValue(e){throw"Next value not supported for volume profile"}}function Je(e){X.reverseInputs(e);var t=new Xe(e).result;return e.reversedInput&&t.reverse(),X.reverseInputs(e),t}Xe.calculate=Je;class Ye extends X{constructor(e){super(e),this.result=[],this.generator=function*(){let e=yield;for(;;)e=yield(e.high+e.low+e.close)/3}(),this.generator.next(),e.low.forEach((t,r)=>{var n=this.generator.next({high:e.high[r],low:e.low[r],close:e.close[r]});this.result.push(n.value)})}nextValue(e){return this.generator.next(e).value}}Ye.calculate=function(e){X.reverseInputs(e);var t=new Ye(e).result;return e.reversedInput&&t.reverse(),X.reverseInputs(e),t};class Qe extends X{constructor(e){super(e);var t=e.high,r=e.low,n=e.close,s=e.volume,i=e.period,o=new Ye({low:[],high:[],close:[]}),a=new F(i,!1,!1,!0),u=new F(i,!1,!1,!0);if(r.length!==t.length||t.length!==n.length||t.length!==s.length)throw"Inputs(low,high, close, volumes) not of equal size";this.result=[],this.generator=function*(){var e,t,r=0;let n=null,s=null;for(t=yield,t=yield;;){var{high:l,low:h,close:c,volume:d}=t,v=0,p=0;n=o.nextValue({high:l,low:h,close:c}),r=n*d,null!=n&&null!=s&&(n>s?v=r:p=r,a.push(v),u.push(p),a.totalPushed>=i&&a.totalPushed>=i&&(e=100-100/(1+a.periodSum/u.periodSum))),s=n,t=yield e}}(),this.generator.next(),t.forEach((e,t)=>{var i=this.generator.next({high:e,low:r[t],close:n[t],volume:s[t]});null!=i.value&&this.result.push(parseFloat(i.value.toFixed(2)))})}nextValue(e){var t=this.generator.next(e);if(null!=t.value)return parseFloat(t.value.toFixed(2))}}function $e(e){X.reverseInputs(e);var t=new Qe(e).result;return e.reversedInput&&t.reverse(),X.reverseInputs(e),t}Qe.calculate=$e;class et extends X{constructor(e){super(e);let t=e.values,r=e.rsiPeriod,n=e.stochasticPeriod,s=e.kPeriod,i=e.dPeriod;this.result=[],this.generator=function*(){let e,t,o,a,u=new he({period:r,values:[]}),l=new Oe({period:n,high:[],low:[],close:[],signalPeriod:s}),h=new J({period:i,values:[],format:e=>e});for(var c=yield;;)e=u.nextValue(c),void 0!==e&&(t=l.nextValue({high:e,low:e,close:e}),void 0!==t&&void 0!==t.d&&(o=h.nextValue(t.d),void 0!==o&&(a={stochRSI:t.k,k:t.d,d:o}))),c=yield a}(),this.generator.next(),t.forEach((e,t)=>{var r=this.generator.next(e);void 0!==r.value&&this.result.push(r.value)})}nextValue(e){let t=this.generator.next(e);if(void 0!==t.value)return t.value}}function tt(e){X.reverseInputs(e);var t=new et(e).result;return e.reversedInput&&t.reverse(),X.reverseInputs(e),t}et.calculate=tt;class rt extends X{constructor(e){super(e);var t=e.values,r=e.period;this.result=[];var n=new F(r,!0,!1,!1);this.generator=function*(){var e,t;for(e=yield;;)n.push(e),n.totalPushed>=r&&(t=n.periodHigh),e=yield t}(),this.generator.next(),t.forEach((e,t)=>{var r=this.generator.next(e);null!=r.value&&this.result.push(r.value)})}nextValue(e){var t=this.generator.next(e);if(null!=t.value)return t.value}}function nt(e){X.reverseInputs(e);var t=new rt(e).result;return e.reversedInput&&t.reverse(),X.reverseInputs(e),t}rt.calculate=nt;class st extends X{constructor(e){super(e);var t=e.values,r=e.period;this.result=[];var n=new F(r,!1,!0,!1);this.generator=function*(){var e,t;for(e=yield;;)n.push(e),n.totalPushed>=r&&(t=n.periodLow),e=yield t}(),this.generator.next(),t.forEach((e,t)=>{var r=this.generator.next(e);null!=r.value&&this.result.push(r.value)})}nextValue(e){var t=this.generator.next(e);if(null!=t.value)return t.value}}function it(e){X.reverseInputs(e);var t=new st(e).result;return e.reversedInput&&t.reverse(),X.reverseInputs(e),t}st.calculate=it;class ot extends X{constructor(e){super(e);var t=e.values,r=e.period;this.result=[];var n=new F(r,!1,!1,!0);this.generator=function*(){var e,t;for(e=yield;;)n.push(e),n.totalPushed>=r&&(t=n.periodSum),e=yield t}(),this.generator.next(),t.forEach((e,t)=>{var r=this.generator.next(e);null!=r.value&&this.result.push(r.value)})}nextValue(e){var t=this.generator.next(e);if(null!=t.value)return t.value}}function at(e){X.reverseInputs(e);var t=new ot(e).result;return e.reversedInput&&t.reverse(),X.reverseInputs(e),t}ot.calculate=at;class ut extends X{constructor(e){super(e);let t=e.brickSize||0;if(e.useATR){let r=Ee(Object.assign({},e));t=r[r.length-1]}if(this.result=new N,0===t)return void console.error("Not enough data to calculate brickSize for renko when using ATR");let r=0,n=0,s=1/0,i=0,o=0,a=0;this.generator=function*(){let e=yield;for(;;){if(0===r){r=e.close,n=e.high,s=e.low,i=e.close,o=e.volume,a=e.timestamp,e=yield;continue}let u=Math.abs(e.close-i),l=Math.abs(e.close-r);if(u>=t&&l>=t){let a=u>l?r:i,h={open:a,high:n>e.high?n:e.high,low:s<e.Low?s:e.low,close:a>e.close?a-t:a+t,volume:o+e.volume,timestamp:e.timestamp};r=h.open,n=h.close,s=h.close,i=h.close,o=0,e=yield h}else n=n>e.high?n:e.high,s=s<e.Low?s:e.low,o+=e.volume,a=e.timestamp,e=yield}}(),this.generator.next(),e.low.forEach((t,r)=>{var n=this.generator.next({open:e.open[r],high:e.high[r],low:e.low[r],close:e.close[r],volume:e.volume[r],timestamp:e.timestamp[r]});n.value&&(this.result.open.push(n.value.open),this.result.high.push(n.value.high),this.result.low.push(n.value.low),this.result.close.push(n.value.close),this.result.volume.push(n.value.volume),this.result.timestamp.push(n.value.timestamp))})}nextValue(e){return console.error("Cannot calculate next value on Renko, Every value has to be recomputed for every change, use calcualte method"),null}}function lt(e){X.reverseInputs(e);var t=new ut(e).result;return e.reversedInput&&(t.open.reverse(),t.high.reverse(),t.low.reverse(),t.close.reverse(),t.volume.reverse(),t.timestamp.reverse()),X.reverseInputs(e),t}ut.calculate=lt;class ht extends X{constructor(e){super(e),this.result=new N;let t=null,r=0,n=1/0,s=0,i=0,o=0;this.generator=function*(){let e=yield,a=null;for(;;){if(null===t)t=(e.close+e.open)/2,r=e.high,n=e.low,s=(e.close+e.open+e.high+e.low)/4,i=e.volume||0,o=e.timestamp||0,a={open:t,high:r,low:n,close:s,volume:e.volume||0,timestamp:e.timestamp||0};else{let i=(e.close+e.open+e.high+e.low)/4,o=(t+s)/2,u=Math.max(o,i,e.high),l=Math.min(e.low,o,i);a={close:i,open:o,high:u,low:l,volume:e.volume||0,timestamp:e.timestamp||0},s=i,t=o,r=u,n=l}e=yield a}}(),this.generator.next(),e.low.forEach((t,r)=>{var n=this.generator.next({open:e.open[r],high:e.high[r],low:e.low[r],close:e.close[r],volume:e.volume?e.volume[r]:e.volume,timestamp:e.timestamp?e.timestamp[r]:e.timestamp});n.value&&(this.result.open.push(n.value.open),this.result.high.push(n.value.high),this.result.low.push(n.value.low),this.result.close.push(n.value.close),this.result.volume.push(n.value.volume),this.result.timestamp.push(n.value.timestamp))})}nextValue(e){return this.generator.next(e).value}}function ct(e){X.reverseInputs(e);var t=new ht(e).result;return e.reversedInput&&(t.open.reverse(),t.high.reverse(),t.low.reverse(),t.close.reverse(),t.volume.reverse(),t.timestamp.reverse()),X.reverseInputs(e),t}ht.calculate=ct;class dt{constructor(){}approximateEqual(e,t){return 1*parseFloat(Math.abs(e-t).toPrecision(4))<=1*parseFloat((.001*e).toPrecision(4))}logic(e){throw"this has to be implemented"}getAllPatternIndex(e){if(e.close.length<this.requiredCount)return console.warn("Data count less than data required for the strategy ",this.name),[];e.reversedInput&&(e.open.reverse(),e.high.reverse(),e.low.reverse(),e.close.reverse());let t=this.logic;return this._generateDataForCandleStick(e).map((e,r)=>t.call(this,e)?r:void 0).filter(e=>e)}hasPattern(e){return e.close.length<this.requiredCount?(console.warn("Data count less than data required for the strategy ",this.name),!1):(e.reversedInput&&(e.open.reverse(),e.high.reverse(),e.low.reverse(),e.close.reverse()),this.logic.call(this,this._getLastDataForCandleStick(e)))}_getLastDataForCandleStick(e){let t=this.requiredCount;if(e.close.length===t)return e;{let r={open:[],high:[],low:[],close:[]},n=0,s=e.close.length-t;for(;n<t;)r.open.push(e.open[s+n]),r.high.push(e.high[s+n]),r.low.push(e.low[s+n]),r.close.push(e.close[s+n]),n++;return r}}_generateDataForCandleStick(e){let t=this.requiredCount;return e.close.map(function(r,n){let s=0,i={open:[],high:[],low:[],close:[]};for(;s<t;)i.open.push(e.open[n+s]),i.high.push(e.high[n+s]),i.low.push(e.low[n+s]),i.close.push(e.close[n+s]),s++;return i}).filter((r,n)=>n<=e.close.length-t)}}class vt extends dt{constructor(){super(),this.name="MorningStar",this.requiredCount=3}logic(e){let t=e.open[0],r=e.close[0],n=e.low[0],s=e.high[1],i=e.low[1],o=e.open[2],a=e.close[2];return r<t&&n>i&&n>s&&s<n&&i<n&&o>s&&e.close[1]<o&&o<a&&a>(t+r)/2}}function pt(e){return(new vt).hasPattern(e)}class ft extends dt{constructor(){super(),this.name="BullishEngulfingPattern",this.requiredCount=2}logic(e){let t=e.open[0],r=e.close[0],n=e.open[1];return r<t&&t>n&&r>n&&t<e.close[1]}}function gt(e){return(new ft).hasPattern(e)}class wt extends dt{constructor(){super(),this.requiredCount=2,this.name="BullishHarami"}logic(e){let t=e.open[0],r=e.close[0],n=e.open[1];return t>n&&r<n&&r<e.close[1]&&t>e.low[1]&&e.high[0]>e.high[1]}}function mt(e){return(new wt).hasPattern(e)}class xt extends dt{constructor(){super(),this.requiredCount=2,this.name="BullishHaramiCross"}logic(e){let t=e.open[0],r=e.close[0],n=e.open[1],s=e.close[1],i=t>n&&r<n&&r<s&&t>e.low[1]&&e.high[0]>e.high[1],o=this.approximateEqual(n,s);return i&&o}}function yt(e){return(new xt).hasPattern(e)}class bt extends dt{constructor(){super(),this.name="Doji",this.requiredCount=1}logic(e){let t=e.open[0],r=e.close[0],n=e.high[0],s=e.low[0],i=this.approximateEqual(t,r),o=i&&this.approximateEqual(t,n),a=i&&this.approximateEqual(r,s);return i&&o==a}}function _t(e){return(new bt).hasPattern(e)}class It extends dt{constructor(){super(),this.name="MorningDojiStar",this.requiredCount=3}logic(e){let t=e.open[0],r=e.close[0],n=e.low[0],s=e.open[1],i=e.close[1],o=e.high[1],a=e.low[1],u=e.open[2],l=e.close[2],h=(t+r)/2,c=r<t,d=(new bt).hasPattern({open:[s],close:[i],high:[o],low:[a]});return c&&d&&u<l&&o<n&&a<n&&u>o&&i<u&&l>h}}function Et(e){return(new It).hasPattern(e)}class Ct extends dt{constructor(){super(),this.requiredCount=3,this.name="DownsideTasukiGap"}logic(e){let t=e.close[0],r=e.open[1],n=e.close[1],s=e.open[2],i=e.close[2];return t<e.open[0]&&n<r&&i>s&&e.high[1]<e.low[0]&&r>s&&n<s&&i>r&&i<t}}function St(e){return(new Ct).hasPattern(e)}class Mt extends dt{constructor(){super(),this.name="BullishMarubozu",this.requiredCount=1}logic(e){let t=e.open[0],r=e.close[0],n=e.high[0],s=e.low[0];return this.approximateEqual(r,n)&&this.approximateEqual(s,t)&&t<r&&t<n}}function Pt(e){return(new Mt).hasPattern(e)}class At extends dt{constructor(){super(),this.requiredCount=2,this.name="PiercingLine"}logic(e){let t=e.open[0],r=e.close[0],n=e.low[0],s=e.open[1],i=e.close[1];return e.low[1]<n&&r<t&&n>s&&i>(t+r)/2&&i>s}}function Vt(e){return(new At).hasPattern(e)}class Ot extends dt{constructor(){super(),this.name="ThreeWhiteSoldiers",this.requiredCount=3}logic(e){let t=e.close[0],r=e.high[0],n=e.open[1],s=e.close[1],i=e.high[1],o=e.open[2];return i>r&&e.high[2]>i&&e.open[0]<t&&n<s&&o<e.close[2]&&t>n&&n<r&&i>o&&o<s}}function Lt(e){return(new Ot).hasPattern(e)}class zt extends dt{constructor(){super(),this.name="BullishHammerStick",this.requiredCount=1}logic(e){let t=e.open[0],r=e.close[0],n=e.low[0],s=r>t;return s=s&&this.approximateEqual(r,e.high[0]),s=s&&r-t<=2*(t-n),s}}function qt(e){return(new zt).hasPattern(e)}class Tt extends dt{constructor(){super(),this.name="BullishInvertedHammerStick",this.requiredCount=1}logic(e){let t=e.open[0],r=e.close[0],n=e.high[0],s=r>t;return s=s&&this.approximateEqual(t,e.low[0]),s=s&&r-t<=2*(n-r),s}}function kt(e){return(new Tt).hasPattern(e)}class Rt extends dt{constructor(){super(),this.name="BearishHammerStick",this.requiredCount=1}logic(e){let t=e.open[0],r=e.close[0],n=e.low[0],s=t>r;return s=s&&this.approximateEqual(t,e.high[0]),s=s&&t-r<=2*(r-n),s}}function Dt(e){return(new Rt).hasPattern(e)}class Bt extends dt{constructor(){super(),this.name="BearishInvertedHammerStick",this.requiredCount=1}logic(e){let t=e.open[0],r=e.close[0],n=e.high[0],s=t>r;return s=s&&this.approximateEqual(r,e.low[0]),s=s&&t-r<=2*(n-t),s}}function Ht(e){return(new Bt).hasPattern(e)}class Ft extends dt{constructor(){super(),this.name="HammerPattern",this.requiredCount=5}logic(e){let t=this.downwardTrend(e);return t=t&&this.includesHammer(e),t=t&&this.hasConfirmation(e),t}downwardTrend(e,t=!0){let r=t?3:4,n=ae({values:e.close.slice(0,r),period:r-1});return le({values:e.close.slice(0,r),period:r-1})>n}includesHammer(e,t=!0){let r=t?3:4,n=t?4:void 0,s={open:e.open.slice(r,n),close:e.close.slice(r,n),low:e.low.slice(r,n),high:e.high.slice(r,n)},i=Dt(s);return i=i||Ht(s),i=i||qt(s),i=i||kt(s),i}hasConfirmation(e){let t=e.close[4];return e.open[4]<t&&e.close[3]<t}}function jt(e){return(new Ft).hasPattern(e)}class Nt extends Ft{constructor(){super(),this.name="HammerPatternUnconfirmed"}logic(e){let t=this.downwardTrend(e,!1);return t=t&&this.includesHammer(e,!1),t}}function Gt(e){return(new Nt).hasPattern(e)}class Ut extends dt{constructor(){super(),this.name="TweezerBottom",this.requiredCount=5}logic(e){return this.downwardTrend(e)&&e.low[3]==e.low[4]}downwardTrend(e){let t=ae({values:e.close.slice(0,3),period:2});return le({values:e.close.slice(0,3),period:2})>t}}function Wt(e){return(new Ut).hasPattern(e)}let Kt=[new ft,new Ct,new wt,new xt,new It,new vt,new Mt,new At,new Ot,new zt,new Tt,new Ft,new Nt,new Ut];class Zt extends dt{constructor(){super(),this.name="Bullish Candlesticks"}hasPattern(e){return Kt.reduce(function(t,r){let n=r.hasPattern(e);return t||n},!1)}}function Xt(e){return(new Zt).hasPattern(e)}class Jt extends dt{constructor(){super(),this.name="BearishEngulfingPattern",this.requiredCount=2}logic(e){let t=e.open[0],r=e.close[0],n=e.open[1];return r>t&&t<n&&r<n&&t>e.close[1]}}function Yt(e){return(new Jt).hasPattern(e)}class Qt extends dt{constructor(){super(),this.requiredCount=2,this.name="BearishHarami"}logic(e){let t=e.open[0],r=e.close[0],n=e.open[1];return t<n&&r>n&&r>e.close[1]&&t<e.low[1]&&e.high[0]>e.high[1]}}function $t(e){return(new Qt).hasPattern(e)}class er extends dt{constructor(){super(),this.requiredCount=2,this.name="BearishHaramiCross"}logic(e){let t=e.open[0],r=e.close[0],n=e.open[1],s=e.close[1],i=t<n&&r>n&&r>s&&t<e.low[1]&&e.high[0]>e.high[1],o=this.approximateEqual(n,s);return i&&o}}function tr(e){return(new er).hasPattern(e)}class rr extends dt{constructor(){super(),this.name="EveningDojiStar",this.requiredCount=3}logic(e){let t=e.open[0],r=e.close[0],n=e.high[0],s=e.open[1],i=e.close[1],o=e.high[1],a=e.low[1],u=e.open[2],l=e.close[2],h=(t+r)/2,c=r>t,d=(new bt).hasPattern({open:[s],close:[i],high:[o],low:[a]});return c&&d&&o>n&&a>n&&u<a&&i>u&&u>l&&l<h}}function nr(e){return(new rr).hasPattern(e)}class sr extends dt{constructor(){super(),this.name="EveningStar",this.requiredCount=3}logic(e){let t=e.open[0],r=e.close[0],n=e.high[0],s=e.high[1],i=e.low[1],o=e.open[2],a=e.close[2];return r>t&&n<i&&n<s&&s>n&&i>n&&o<i&&e.close[1]>o&&o>a&&a<(t+r)/2}}function ir(e){return(new sr).hasPattern(e)}class or extends dt{constructor(){super(),this.name="BearishMarubozu",this.requiredCount=1}logic(e){let t=e.open[0],r=e.close[0],n=e.low[0];return this.approximateEqual(t,e.high[0])&&this.approximateEqual(n,r)&&t>r&&t>n}}function ar(e){return(new or).hasPattern(e)}class ur extends dt{constructor(){super(),this.name="ThreeBlackCrows",this.requiredCount=3}logic(e){let t=e.open[0],r=e.close[0],n=e.open[1],s=e.close[1],i=e.low[1],o=e.open[2];return e.low[0]>i&&i>e.low[2]&&t>r&&n>s&&o>e.close[2]&&t>n&&n>r&&n>o&&o>s}}function lr(e){return(new ur).hasPattern(e)}class hr extends dt{constructor(){super(),this.name="HangingMan",this.requiredCount=5}logic(e){let t=this.upwardTrend(e);return t=t&&this.includesHammer(e),t=t&&this.hasConfirmation(e),t}upwardTrend(e,t=!0){let r=t?3:4;return ae({values:e.close.slice(0,r),period:r-1})>le({values:e.close.slice(0,r),period:r-1})}includesHammer(e,t=!0){let r=t?3:4,n=t?4:void 0,s={open:e.open.slice(r,n),close:e.close.slice(r,n),low:e.low.slice(r,n),high:e.high.slice(r,n)},i=Dt(s);return i=i||qt(s),i}hasConfirmation(e){let t=e.close[4];return e.open[4]>t&&e.close[3]>t}}function cr(e){return(new hr).hasPattern(e)}class dr extends hr{constructor(){super(),this.name="HangingManUnconfirmed"}logic(e){let t=this.upwardTrend(e,!1);return t=t&&this.includesHammer(e,!1),t}}function vr(e){return(new dr).hasPattern(e)}class pr extends dt{constructor(){super(),this.name="ShootingStar",this.requiredCount=5}logic(e){let t=this.upwardTrend(e);return t=t&&this.includesHammer(e),t=t&&this.hasConfirmation(e),t}upwardTrend(e,t=!0){let r=t?3:4;return ae({values:e.close.slice(0,r),period:r-1})>le({values:e.close.slice(0,r),period:r-1})}includesHammer(e,t=!0){let r=t?3:4,n=t?4:void 0,s={open:e.open.slice(r,n),close:e.close.slice(r,n),low:e.low.slice(r,n),high:e.high.slice(r,n)},i=Ht(s);return i=i||kt(s),i}hasConfirmation(e){let t=e.close[4];return e.open[4]>t&&e.close[3]>t}}function fr(e){return(new pr).hasPattern(e)}class gr extends pr{constructor(){super(),this.name="ShootingStarUnconfirmed"}logic(e){let t=this.upwardTrend(e,!1);return t=t&&this.includesHammer(e,!1),t}}function wr(e){return(new gr).hasPattern(e)}class mr extends dt{constructor(){super(),this.name="TweezerTop",this.requiredCount=5}logic(e){return this.upwardTrend(e)&&e.high[3]==e.high[4]}upwardTrend(e){return ae({values:e.close.slice(0,3),period:2})>le({values:e.close.slice(0,3),period:2})}}function xr(e){return(new mr).hasPattern(e)}let yr=[new Jt,new Qt,new er,new rr,new sr,new or,new ur,new Rt,new Bt,new hr,new dr,new pr,new gr,new mr];class br extends dt{constructor(){super(),this.name="Bearish Candlesticks"}hasPattern(e){return yr.reduce(function(t,r){return t||r.hasPattern(e)},!1)}}function _r(e){return(new br).hasPattern(e)}class Ir extends dt{constructor(){super(),this.name="AbandonedBaby",this.requiredCount=3}logic(e){let t=e.open[0],r=e.low[0],n=e.open[1],s=e.close[1],i=e.high[1],o=e.low[1],a=e.open[2],u=e.close[2],l=e.high[2],h=e.low[2],c=e.close[0]<t,d=(new bt).hasPattern({open:[n],close:[s],high:[i],low:[o]});return c&&d&&i<r&&h>i&&u>a&&l<t}}function Er(e){return(new Ir).hasPattern(e)}class Cr extends dt{constructor(){super(),this.name="DarkCloudCover",this.requiredCount=2}logic(e){let t=e.open[0],r=e.close[0],n=e.open[1],s=e.close[1];return r>t&&s<n&&n>e.high[0]&&s<(r+t)/2&&s>t}}function Sr(e){return(new Cr).hasPattern(e)}class Mr extends dt{constructor(){super(),this.requiredCount=1,this.name="DragonFlyDoji"}logic(e){let t=e.open[0],r=e.close[0],n=e.high[0],s=e.low[0],i=this.approximateEqual(t,r),o=i&&this.approximateEqual(t,n),a=i&&this.approximateEqual(r,s);return i&&o&&!a}}function Pr(e){return(new Mr).hasPattern(e)}class Ar extends dt{constructor(){super(),this.requiredCount=1,this.name="GraveStoneDoji"}logic(e){let t=e.open[0],r=e.close[0],n=e.high[0],s=e.low[0],i=this.approximateEqual(t,r),o=i&&this.approximateEqual(t,n),a=i&&this.approximateEqual(r,s);return i&&a&&!o}}function Vr(e){return(new Ar).hasPattern(e)}class Or extends dt{constructor(){super(),this.name="BullishSpinningTop",this.requiredCount=1}logic(e){let t=e.open[0],r=e.close[0],n=e.high[0],s=e.low[0],i=Math.abs(r-t),o=Math.abs(n-r),a=Math.abs(t-s);return i<o&&i<a}}function Lr(e){return(new Or).hasPattern(e)}class zr extends dt{constructor(){super(),this.name="BearishSpinningTop",this.requiredCount=1}logic(e){let t=e.open[0],r=e.high[0],n=e.low[0],s=Math.abs(e.close[0]-t),i=Math.abs(r-t),o=Math.abs(r-n);return s<i&&s<o}}function qr(e){return(new zr).hasPattern(e)}function Tr(e,t){let r;return r=[0,23.6,38.2,50,61.8,78.6,100,127.2,161.8,261.8,423.6].map(e<t?function(r){let n=t-Math.abs(e-t)*r/100;return n>0?n:0}:function(r){let n=t+Math.abs(e-t)*r/100;return n>0?n:0}),r}class kr extends X{constructor(e){super(e),this.result=[];var t=Object.assign({},{conversionPeriod:9,basePeriod:26,spanPeriod:52,displacement:26},e),r=new F(2*t.conversionPeriod,!0,!0,!1),n=new F(2*t.basePeriod,!0,!0,!1),s=new F(2*t.spanPeriod,!0,!0,!1);this.generator=function*(){let e,i,o=Math.max(t.conversionPeriod,t.basePeriod,t.spanPeriod,t.displacement),a=1;for(i=yield;;){if(r.push(i.high),r.push(i.low),n.push(i.high),n.push(i.low),s.push(i.high),s.push(i.low),a<o)a++;else{let t=(r.periodHigh+r.periodLow)/2,i=(n.periodHigh+n.periodLow)/2;e={conversion:t,base:i,spanA:(t+i)/2,spanB:(s.periodHigh+s.periodLow)/2}}i=yield e}}(),this.generator.next(),e.low.forEach((t,r)=>{var n=this.generator.next({high:e.high[r],low:e.low[r]});n.value&&this.result.push(n.value)})}nextValue(e){return this.generator.next(e).value}}function Rr(e){X.reverseInputs(e);var t=new kr(e).result;return e.reversedInput&&t.reverse(),X.reverseInputs(e),t}kr.calculate=Rr;class Dr extends Z{constructor(){super(...arguments),this.maPeriod=20,this.atrPeriod=10,this.useSMA=!1,this.multiplier=1}}class Br extends Z{}class Hr extends X{constructor(e){super(e);var t,r=new(e.useSMA?J:Q)({period:e.maPeriod,values:[],format:e=>e}),n=new Ie({period:e.atrPeriod,high:[],low:[],close:[],format:e=>e});this.result=[],this.generator=function*(){var s;for(t=yield;;){var{close:i}=t,o=r.nextValue(i),a=n.nextValue(t);null!=o&&null!=a&&(s={middle:o,upper:o+e.multiplier*a,lower:o-e.multiplier*a}),t=yield s}}(),this.generator.next(),e.high.forEach((t,r)=>{var n=this.generator.next({high:t,low:e.low[r],close:e.close[r]});null!=n.value&&this.result.push(n.value)})}nextValue(e){var t=this.generator.next(e);if(null!=t.value)return t.value}}function Fr(e){X.reverseInputs(e);var t=new Hr(e).result;return e.reversedInput&&t.reverse(),X.reverseInputs(e),t}Hr.calculate=Fr;class jr extends Z{constructor(){super(...arguments),this.period=22,this.multiplier=3}}class Nr extends Z{}class Gr extends X{constructor(e){super(e);var t=e.high,r=e.low,n=e.close;this.result=[];var s=new Ie({period:e.period,high:[],low:[],close:[],format:e=>e}),i=new F(2*e.period,!0,!0,!1);this.generator=function*(){for(var t,r,n=yield;;){var{high:o,low:a}=n;i.push(o),i.push(a),r=s.nextValue(n),i.totalPushed>=2*e.period&&null!=r&&(t={exitLong:i.periodHigh-r*e.multiplier,exitShort:i.periodLow+r*e.multiplier}),n=yield t}}(),this.generator.next(),t.forEach((e,t)=>{var s=this.generator.next({high:e,low:r[t],close:n[t]});null!=s.value&&this.result.push(s.value)})}nextValue(e){var t=this.generator.next(e);if(null!=t.value)return t.value}}function Ur(e){X.reverseInputs(e);var t=new Gr(e).result;return e.reversedInput&&t.reverse(),X.reverseInputs(e),t}Gr.calculate=Ur;class Wr extends X{constructor(e){super(e),this.lineA=e.lineA,this.lineB=e.lineB;var t=[],r=[];this.generator=function*(){for(var e=yield,n=!1;;){t.unshift(e.valueA),r.unshift(e.valueB),n=e.valueA>e.valueB;for(var s=1;!0===n&&t[s]>=r[s];)t[s]>r[s]?n=!1:t[s]<r[s]?n=!0:t[s]===r[s]&&(s+=1);!0===n&&(t=[e.valueA],r=[e.valueB]),e=yield n}}(),this.generator.next(),this.result=[],this.lineA.forEach((e,t)=>{var r=this.generator.next({valueA:this.lineA[t],valueB:this.lineB[t]});void 0!==r.value&&this.result.push(r.value)})}static reverseInputs(e){e.reversedInput&&(e.lineA&&e.lineA.reverse(),e.lineB&&e.lineB.reverse())}nextValue(e,t){return this.generator.next({valueA:e,valueB:t}).value}}function Kr(e){X.reverseInputs(e);var t=new Wr(e).result;return e.reversedInput&&t.reverse(),X.reverseInputs(e),t}Wr.calculate=Kr;class Zr extends X{constructor(e){super(e),this.lineA=e.lineA,this.lineB=e.lineB;var t=[],r=[];this.generator=function*(){for(var e=yield,n=!1;;){t.unshift(e.valueA),r.unshift(e.valueB),n=e.valueA<e.valueB;for(var s=1;!0===n&&t[s]<=r[s];)t[s]<r[s]?n=!1:t[s]>r[s]?n=!0:t[s]===r[s]&&(s+=1);!0===n&&(t=[e.valueA],r=[e.valueB]),e=yield n}}(),this.generator.next(),this.result=[],this.lineA.forEach((e,t)=>{var r=this.generator.next({valueA:this.lineA[t],valueB:this.lineB[t]});void 0!==r.value&&this.result.push(r.value)})}static reverseInputs(e){e.reversedInput&&(e.lineA&&e.lineA.reverse(),e.lineB&&e.lineB.reverse())}nextValue(e,t){return this.generator.next({valueA:e,valueB:t}).value}}function Xr(e){X.reverseInputs(e);var t=new Zr(e).result;return e.reversedInput&&t.reverse(),X.reverseInputs(e),t}Zr.calculate=Xr;let Jr=(()=>{class e{constructor(e){this.TIService=e,this.TA=n,console.log(n)}getGravityRatio(e){const t=this.TIService.gravity(e),r=[];for(const[n,s]of e.entries())r.push([+((s[0]-+t[n])/+t[n]).toFixed(4),+((s[1]-+t[n])/+t[n]).toFixed(4),+((s[2]-+t[n])/+t[n]).toFixed(4),+((s[3]-+t[n])/+t[n]).toFixed(4)]);return r}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(D))},e.\u0275prov=o.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Yr=function(){return{height:"auto"}},Qr=new R.b("Technical Analysis"),$r="#00da3c",en="#ec0000",tn=[{path:"",component:(()=>{class e{constructor(e,t,r){this._ngZone=e,this.TIService=t,this.TAService=r,this.categoryData=[],this.oclhv=[],this.volumes=[],this.selectedRange=[],this.chartOption=this.getChartOption(this.categoryData,this.oclhv,this.volumes)}ngOnInit(){return i(this,void 0,void 0,function*(){Qr.debug("ngOnInit()");const e=new ccxt.huobipro,t=yield e.fetchOHLCV("BTC/USDT","1d",0,2e3);for(const[r,n]of t.entries())this.categoryData.push(new Date(n.splice(0,1)[0]).toDateString()),this.oclhv.push([n[0],n[3],n[2],n[1],n[4]]),this.volumes.push([r,n[4],n[0]>n[3]?1:-1]);this.echartsInstance.setOption(this.getChartOption(this.categoryData,this.oclhv,this.volumes),!0),this.echartsInstance.dispatchAction({type:"brush",areas:[{brushType:"lineX",coordRange:[this.categoryData[this.categoryData.length-6],this.categoryData[this.categoryData.length-2]],xAxisIndex:0}]})})}onChartInit(e){Qr.debug("onChartInit()"),this.echartsInstance=e,this.echartsInstance.on("brushEnd",e=>{"rect"===e.areas[0].brushType?this.selectedRange=e.areas[0].coordRange[0]:"lineX"===e.areas[0].brushType&&(this.selectedRange=e.areas[0].coordRange),console.log(this.selectedRange)})}start(){if(this.selectedRange.length>0){const e=this.TAService.getGravityRatio(this.oclhv);console.log(e);const t=e.slice(this.selectedRange[0],this.selectedRange[1]+1),r=[];for(let i=72;i<this.oclhv.length-t.length;i++){const n=[i];if(!e[i][0])continue;let s=0;for(let r=0;r<t.length;r++){const o=e[i+r][1],a=e[i+r][2],u=e[i+r][3],l=Math.pow(e[i+r][0]-t[r][0],2),h=Math.pow(o-t[r][1],2),c=Math.pow(a-t[r][2],2),d=Math.pow(u-t[r][3],2),v=Math.sqrt(l+h+c+d);n.push(v),s+=v}n.push(s),r.push(n)}const n=r.sort((e,t)=>e[e.length-1]-t[t.length-1]);console.log(n);const s=[];for(let i=0;i<6;i++)s.push({name:"\u76f8\u4f3c",coord:[this.categoryData[n[i][0]],1.1*this.oclhv[n[i][0]][2]],value:i+": "+n[i][n[i].length-1].toFixed(4),itemStyle:{color:"rgb(141,60,85)"}});this.echartsInstance.setOption(this.getChartOption(this.categoryData,this.oclhv,this.volumes,{kline:{markPointData:s}}),!0)}else Qr.error("Range invalid")}test(){this.TAService.getGravityRatio(this.oclhv)}getChartOption(e,t,r,n={kline:{markPointData:[]}}){return{backgroundColor:"#21202D",animation:!1,legend:{bottom:10,left:"center",data:["K-Line","Gravity","MA10","MA20","MA30"]},axisPointer:{link:[{xAxisIndex:"all"}],label:{backgroundColor:"#777"}},brush:{xAxisIndex:"all",brushLink:"all",outOfBrush:{colorAlpha:.1}},grid:[{left:"2%",right:"2%",height:"50%"},{left:"2%",right:"2%",top:"63%",height:"16%"}],visualMap:[{show:!1,seriesIndex:1,dimension:2,pieces:[{value:1,color:en},{value:-1,color:$r}]}],xAxis:[{type:"category",data:e,scale:!0,boundaryGap:!0,axisLine:{onZero:!1,lineStyle:{color:"#8392A5"}},splitLine:{show:!1},splitNumber:20,min:"dataMin",max:"dataMax",axisPointer:{z:100}},{type:"category",gridIndex:1,data:e,scale:!0,boundaryGap:!0,axisLine:{onZero:!1,lineStyle:{color:"#8392A5"}},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1},splitNumber:20,min:"dataMin",max:"dataMax"}],yAxis:[{axisLine:{lineStyle:{color:"#8392A5"}},scale:!0,splitLine:{show:!1}},{scale:!0,gridIndex:1,splitNumber:2,axisLabel:{show:!1},axisLine:{show:!1,lineStyle:{color:"#8392A5"}},axisTick:{show:!1},splitLine:{show:!1}}],dataZoom:[{type:"inside",xAxisIndex:[0,1],start:80,end:100},{show:!0,xAxisIndex:[0,1],type:"slider",top:"85%",start:80,end:100}],series:[{name:"K-Line",type:"candlestick",data:t,itemStyle:{color:$r,color0:en,borderColor:null,borderColor0:null},markPoint:{data:n.kline.markPointData}},{name:"Volume",type:"bar",xAxisIndex:1,yAxisIndex:1,data:r},{name:"Gravity",type:"line",data:this.TIService.gravity(t),lineStyle:{color:"white",opacity:1,width:.5},showSymbol:!1},{name:"Gravity-10%",type:"line",data:this.TIService.gravity(t,1.1),lineStyle:{color:"#dddddd",opacity:.8,width:.5},showSymbol:!1},{name:"Gravity+10%",type:"line",data:this.TIService.gravity(t,.9),lineStyle:{color:"#dddddd",opacity:.8,width:.5},showSymbol:!1},{name:"Gravity-20%",type:"line",data:this.TIService.gravity(t,1.2),lineStyle:{color:"#bbbbbb",opacity:.5,width:.5},showSymbol:!1},{name:"Gravity+20%",type:"line",data:this.TIService.gravity(t,.8),lineStyle:{color:"#bbbbbb",opacity:.5,width:.5},showSymbol:!1}]}}}return e.\u0275fac=function(t){return new(t||e)(o.Mb(o.B),o.Mb(D),o.Mb(Jr))},e.\u0275cmp=o.Gb({type:e,selectors:[["app-main-chart"]],decls:8,vars:3,consts:[["echarts","",1,"demo-chart",3,"options","initOpts","chartInit"],[3,"click"],["mat-button","",3,"click"]],template:function(e,t){1&e&&(o.Sb(0,"div",0),o.ac("chartInit",function(e){return t.onChartInit(e)}),o.Rb(),o.Ac(1,"\n\n"),o.Sb(2,"button",1),o.ac("click",function(){return t.test()}),o.Ac(3,"test"),o.Rb(),o.Ac(4,"\n\n"),o.Sb(5,"button",2),o.ac("click",function(){return t.start()}),o.Ac(6,"Start"),o.Rb(),o.Ac(7,"\n")),2&e&&o.jc("options",t.chartOption)("initOpts",o.kc(2,Yr))},directives:[z],styles:[".demo-chart[_ngcontent-%COMP%]{height:100%}"]}),e})()}];let rn=(()=>{class e{}return e.\u0275mod=o.Kb({type:e}),e.\u0275inj=o.Jb({factory:function(t){return new(t||e)},imports:[[k.i.forChild(tn)],k.i]}),e})(),nn=(()=>{class e{}return e.\u0275mod=o.Kb({type:e}),e.\u0275inj=o.Jb({factory:function(t){return new(t||e)},imports:[[s.c,rn,T.forRoot({echarts:()=>r.e(4).then(r.t.bind(null,"MT78",7))})]]}),e})()}}]);